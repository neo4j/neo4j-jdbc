<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Neo4j JDBC Driver</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Neo4j JDBC Driver</h1>
<div class="details">
<span id="revdate">2024-11-04T08:39:00Z</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_abstract">Abstract</a></li>
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_features">1.1. Features</a></li>
<li><a href="#_limitations">1.2. Limitations</a></li>
<li><a href="#_when_to_use_the_neo4j_jdbc_driver">1.3. When to use the Neo4j JDBC Driver?</a></li>
<li><a href="#_differences_with_the_previous_versions_of_this_driver_and_other_jdbc_drivers_for_neo4j">1.4. Differences with the previous versions of this driver and other JDBC drivers for Neo4j</a></li>
</ul>
</li>
<li><a href="#_usage">2. Usage</a>
<ul class="sectlevel2">
<li><a href="#connect-dotenv">2.1. Getting a connection via environment variables</a></li>
</ul>
</li>
<li><a href="#_distribution">3. Distribution</a>
<ul class="sectlevel2">
<li><a href="#_driver_modules_and_dependencies">3.1. Driver modules and dependencies</a></li>
<li><a href="#available_bundles">3.2. Available bundles</a></li>
</ul>
</li>
<li><a href="#_configuration">4. Configuration</a>
<ul class="sectlevel2">
<li><a href="#_driver_class_name">4.1. Driver class name</a></li>
<li><a href="#_causal_clustering_and_bookmarks">4.2. Causal clustering and bookmarks</a></li>
<li><a href="#_neo4j_transactional_metadata">4.3. Neo4j transactional metadata</a></li>
<li><a href="#_url_and_connection_properties">4.4. URL and connection properties</a></li>
<li><a href="#_getting_a_driver_or_a_connection_instance">4.5. Getting a driver or a connection instance</a></li>
<li><a href="#_securing_your_connection_by_using_ssl">4.6. Securing your connection by using SSL</a></li>
</ul>
</li>
<li><a href="#_metadata">5. Metadata</a>
<ul class="sectlevel2">
<li><a href="#_catalog_and_schema">5.1. Catalog and schema</a></li>
<li><a href="#_labels_to_tables">5.2. Labels to tables</a></li>
</ul>
</li>
<li><a href="#s2c_introduction">6. SQL to Cypher translation</a>
<ul class="sectlevel2">
<li><a href="#_introduction_2">6.1. Introduction</a></li>
<li><a href="#_translating_sql_to_cypher">6.2. Translating SQL to Cypher</a></li>
<li><a href="#s2c">6.3. Using the default translator</a></li>
</ul>
</li>
<li><a href="#text2cypher">7. text2cypher</a></li>
<li><a href="#_neo4j_specific_conversions">Appendix A: Neo4j specific conversions</a>
<ul class="sectlevel2">
<li><a href="#_data_types_for_fixed_point_arithmetic">A.1. Data types for fixed-point arithmetic</a></li>
<li><a href="#_sql_date_time_and_timestamps">A.2. SQL Date, Time and Timestamps</a></li>
</ul>
</li>
<li><a href="#_neo4j_specific_syntax_for_statements">Appendix B: Neo4j specific syntax for statements</a>
<ul class="sectlevel2">
<li><a href="#_callable_statements">B.1. Callable statements</a></li>
</ul>
</li>
<li><a href="#_migrating_from_older_versions_or_other_jdbc_drivers_for_neo4j">Appendix C: Migrating from older versions or other JDBC drivers for Neo4j</a>
<ul class="sectlevel2">
<li><a href="#_migrating_from_version_4_or_5_of_this_driver">C.1. Migrating from version 4 or 5 of this driver</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#169; Copyright 2023-2024 the original authors.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the manual for the official Neo4j JDBC Driver.</p>
</div>
<div class="paragraph">
<p>This driver is officially supported and endorsed by Neo4j.
It is a standalone driver, independent of and <strong>not</strong> built on top of the <a href="https://github.com/neo4j/neo4j-java-driver">common Neo4j Java Driver</a>.
While the latter provides a Neo4j-idiomatic way to access Neo4j from Java, the JDBC driver adheres to <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/package-summary.html">JDBC 4.3</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This documentation refers to <strong>this</strong> driver as the <em>Neo4j JDBC Driver</em> and to the idiomatic Neo4j driver as the <em>common Neo4j Java Driver</em>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JDBC stands for "Java Database Connectivity" and is thus not bound exclusively to relational databases.
Nevertheless, JDBC&#8217;s terms, definitions, and behavior are highly influenced by SQL and relational databases.
As Neo4j is a graph database with quite a different paradigm than relational and a non-standardized behaviour in some areas, there might be some details that don&#8217;t map 100% in each place, and we make sure to educate you about these in this documentation.</p>
</div>
<div class="paragraph">
<p>This documentation focuses on install, use, and configure the Neo4j JDBC Driver, as well as discussing the driver&#8217;s design choices.
While we do provide runnable examples showing how to use JDBC with Neo4j, this is not a documentation about how to correctly use JDBC as an API.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Neo4j JDBC Driver requires JDK 17 on the client side and Neo4j 5.5+ on the server side.
To use it with a Neo4j cluster, server-side routing must be enabled on the cluster.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_features">1.1. Features</h3>
<div class="ulist">
<ul>
<li>
<p>Fully supports the Java module system</p>
</li>
<li>
<p>Adheres to JDBC 4.3</p>
</li>
<li>
<p>Can run any Cypher statement</p>
</li>
<li>
<p>Implements <code>DatabaseMetaData</code> and <code>ResultSetMetaData</code> as fully as possible with a nearly schemaless database and general very flexible result sets, allowing for automatic metadata retrieval from ETL and ELT tools</p>
</li>
<li>
<p>Provides an <a href="https://en.wikipedia.org/wiki/Service_provider_interface">SPI</a> to hook in translators from SQL to Cypher</p>
</li>
<li>
<p>Provides an optional default implementation to translate many SQL statements into semantically similar Cypher statements</p>
</li>
<li>
<p>Can be safely used with JDBC connection pools as opposed to the common Neo4j Java Driver or any JDBC driver based on that, as it doesn&#8217;t do internal connection pooling and transaction management otherwise than dictated by the JDBC Spec</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The absence of any connection pooling and transaction management is an advantage of the Neo4j JDBC Driver over the common Neo4j Java Driver.
It allows to pick and choose any database connection pooling system such as <a href="https://github.com/brettwooldridge/HikariCP">HikariCP</a> and transaction management such as <a href="https://jakarta.ee/specifications/transactions/">Jakarta Transactions</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_limitations">1.2. Limitations</h3>
<div class="ulist">
<ul>
<li>
<p>The database metadata is retrieved using Neo4j&#8217;s schema methods, such as <code>db.labels</code>, <code>db.schema.nodeTypeProperties()</code>, which may not always be accurate</p>
</li>
<li>
<p>While single label nodes map naturally to table names, nodes with multiple labels don&#8217;t</p>
</li>
<li>
<p>There is no reliable way to always determine the datatype for properties on nodes, as it would require reading all of them (which this driver does not do)</p>
</li>
<li>
<p>Some JDBC features are not supported yet (such as the <code>CallableStatement</code>); some feature will never be supported</p>
</li>
<li>
<p>The SQL to Cypher translator supports only a limited subset of clauses and SQL constructs that can be equivalently translated to Cypher (See <a href="#s2c_supported_statements">Supported statements</a>)</p>
</li>
<li>
<p>There is no "right" way to map <code>JOIN</code> statements to relationships, so your mileage may vary</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_when_to_use_the_neo4j_jdbc_driver">1.3. When to use the Neo4j JDBC Driver?</h3>
<div class="ulist">
<ul>
<li>
<p>Integration with ETL and ELT tools that don&#8217;t offer an integration based on the common Neo4j Java driver</p>
</li>
<li>
<p>An easier on-ramp towards Neo4j for people familiar with JDBC, who want to keep using that API, but with Cypher and Neo4j</p>
</li>
<li>
<p>Integration for ecosystems like Jakarta EE whose transaction management directly supports any JDBC-compliant driver</p>
</li>
<li>
<p>Integration with database migration tools such as Flyway</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>There is no need to redesign an application that is built on the common Neo4j Java Driver to migrate to this driver.</strong>
If your ecosystem already provides a higher-level integration based on the common Neo4j Java Driver, such as <a href="https://github.com/spring-projects/spring-data-neo4j">Spring Data Neo4j (SDN)</a> for <a href="https://spring.io/projects/spring-boot/">Spring</a>, there is no need to switch to something else.
In case of <a href="https://quarkus.io">Quarkus</a>, the Neo4j JDBC Driver is an option to consider: although we do provide an integration for the <a href="https://github.com/quarkiverse/quarkus-neo4j">common Neo4j Java Driver</a>, this integration does not support Quarkus' transaction systems in contrast to this driver.</p>
</div>
<div class="paragraph">
<p>As there is little incentive to use this driver with Hibernate (<a href="https://github.com/neo4j/neo4j-ogm">Neo4j-OGM</a> or SDN are the best alternatives for Neo4j), it might be worth giving <a href="https://spring.io/projects/spring-data-jdbc/">Spring Data JDBC</a> a try.</p>
</div>
</div>
<div class="sect2">
<h3 id="_differences_with_the_previous_versions_of_this_driver_and_other_jdbc_drivers_for_neo4j">1.4. Differences with the previous versions of this driver and other JDBC drivers for Neo4j</h3>
<div class="paragraph">
<p>Several other JDBC drivers exists for Neo4j, most notably the previous versions 4 and 5 of this driver.
Most (if not all) of them wrap the common Neo4j Java Driver and implement the JDBC spec on top of that.
This comes with a number of issues:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You end up with a <em>pool of connection pools</em>, because the common Neo4j Java Driver manages a connection pool, whereas JDBC drivers delegate this task to dedicated pooling solutions.</p>
</li>
<li>
<p>The transaction management of the common Neo4j Java Driver is not aligned with the way JDBC manages transactions.</p>
</li>
<li>
<p>Older versions of the Neo4j JDBC driver shade a few dependencies, such as <code>Jackson</code> as well as additional logging frameworks.
This takes a toll on the classpath and, in case of logging, it leads to runtime problems.</p>
</li>
<li>
<p>Existing drivers with an SQL-to-Cypher translation layer are "read-only" and don&#8217;t support write statements, so they cannot be used for ETL use-cases aiming to ingest data into Neo4j.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This driver does not support automatic reshaping or flattening of the result sets, as the previous versions do.
If you query for nodes, relationships, paths, or maps, you should use <code>getObject</code> on the result sets and cast them to the appropriate type (you find all of them inside the package <code>org.neo4j.jdbc.values</code>).
However, the default SQL-to-Cypher translator will (when connected to a database) figure out what properties nodes have and turn the asterisk (<code>*</code>) into individual columns of nodes and relationships, just like what you would expect when running a <code>SELECT *</code> statement.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For information on upgrade/migration from other drivers to this one, see <a href="#">Neo4j JDBC Driver</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage">2. Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add the JDBC driver to your application, for example as a Gradle dependency:</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. Using the full bundle as a runtime dependency inside a Gradle-based project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="kotlin">dependencies {
    runtimeOnly(org.neo4j:neo4j-jdbc-full-bundle:6.0.1-SNAPSHOT) <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The coordinates are the same for a Maven project.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can then use the Neo4j JDBC driver as you would do with any other JDBC driver:</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
In case any tooling asks you for the name of the concrete driver class, it is <code>org.neo4j.jdbc.Neo4jDriver</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Listing 2. Acquire a connection and execute a query</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">java.sql.DriverManager</span>;
<span class="keyword">import</span> <span class="include">java.sql.SQLException</span>;
<span class="keyword">import</span> <span class="include">java.util.List</span>;

<span class="directive">public</span> <span class="directive">final</span> <span class="type">class</span> <span class="class">Quickstart</span> {

    <span class="directive">static</span> <span class="type">void</span> queryWithCypher() {
        <span class="type">var</span> query = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="content">
                MATCH (m:Movie)&lt;-[:ACTED_IN]-(p:Person)
                RETURN m.title AS title, collect(p.name) AS actors
                ORDER BY m.title
                </span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;

        <span class="type">var</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:neo4j://localhost:7687</span><span class="delimiter">&quot;</span></span>;
        <span class="type">var</span> username = <span class="string"><span class="delimiter">&quot;</span><span class="content">neo4j</span><span class="delimiter">&quot;</span></span>;
        <span class="type">var</span> password = <span class="string"><span class="delimiter">&quot;</span><span class="content">verysecret</span><span class="delimiter">&quot;</span></span>;

        <span class="keyword">try</span> (<span class="type">var</span> con = <span class="predefined-type">DriverManager</span>.getConnection(url, username, password); <i class="conum" data-value="1"></i><b>(1)</b>
                <span class="type">var</span> stmt = con.createStatement();  <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="type">var</span> result = stmt.executeQuery(query)) { <i class="conum" data-value="3"></i><b>(3)</b>

            <span class="keyword">while</span> (result.next()) { <i class="conum" data-value="4"></i><b>(4)</b>
                <span class="type">var</span> movie = result.getString(<span class="integer">1</span>); <i class="conum" data-value="5"></i><b>(5)</b>
                <span class="type">var</span> actors = (<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;) result.getObject(<span class="string"><span class="delimiter">&quot;</span><span class="content">actors</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="6"></i><b>(6)</b>
                <span class="predefined-type">System</span>.out.printf(<span class="string"><span class="delimiter">&quot;</span><span class="content">%s%n</span><span class="delimiter">&quot;</span></span>, movie);
                actors.forEach(actor -&gt; <span class="predefined-type">System</span>.out.printf(<span class="string"><span class="delimiter">&quot;</span><span class="char">\t</span><span class="content"> * %s%n</span><span class="delimiter">&quot;</span></span>, actor));
            }
        }
        <span class="keyword">catch</span> (<span class="exception">SQLException</span> ex) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">RuntimeException</span>(ex);
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Instantiate a JDBC connection. There&#8217;s no need to do any class loading beforehand, the driver will be automatically registered</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create a (reusable) statement</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Execute a query</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Iterate over the results, as with any other JDBC result set</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>JDBC&#8217;s indexing starts at 1</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>JDBC also allows retrieval of result columns by name; the Neo4j JDBC driver also supports complex objects, such as lists</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example above we used Neo4j&#8217;s <em>lingua franca</em>, <a href="https://neo4j.com/docs/getting-started/cypher-intro/">Cypher</a>, to query the database.
The Neo4j JDBC Driver has limited support for using SQL as well.
It can do so automatically or on a case-by-case basis.
To translate a single, call <code>java.sql.Connection#nativeSQL(String)</code> and use the result in your queries.
For automatic translation, instantiate the driver setting the optional URL parameter <code>sql2cypher</code> to <code>true</code>.
The following example shows how:</p>
</div>
<div class="listingblock">
<div class="title">Listing 3. Configure the JDBC driver to automatically translate SQL to cypher.</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">var</span> query = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="content">
        SELECT m.title AS title, collect(p.name) AS actors
        FROM Person as p
        JOIN Movie as m ON (m.id = p.ACTED_IN)
        ORDER BY m.title
        </span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>; <i class="conum" data-value="1"></i><b>(1)</b>

<span class="type">var</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:neo4j://localhost:7687?enableSQLTranslation=true</span><span class="delimiter">&quot;</span></span>;

<span class="keyword">try</span> (<span class="type">var</span> con = <span class="predefined-type">DriverManager</span>.getConnection(url, username, password);
        <span class="type">var</span> stmt = con.createStatement();
        <span class="type">var</span> result = stmt.executeQuery(query)) {

    <span class="keyword">while</span> (result.next()) {
        <span class="type">var</span> movie = result.getString(<span class="integer">1</span>);
        <span class="type">var</span> actors = (<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;) result.getObject(<span class="string"><span class="delimiter">&quot;</span><span class="content">actors</span><span class="delimiter">&quot;</span></span>);
        <span class="predefined-type">System</span>.out.printf(<span class="string"><span class="delimiter">&quot;</span><span class="content">%s%n</span><span class="delimiter">&quot;</span></span>, movie);
        actors.forEach(actor -&gt; <span class="predefined-type">System</span>.out.printf(<span class="string"><span class="delimiter">&quot;</span><span class="char">\t</span><span class="content"> * %s%n</span><span class="delimiter">&quot;</span></span>, actor));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This SQL query will be translated into the same Cypher query of the previous example.
The remainder of the method is identical to before.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information, see <a href="#s2c_introduction">SQL to Cypher translation</a>.</p>
</div>
<div class="paragraph">
<p>The JDBC specification does not support named parameters, only index-based parameters, starting at <code>1</code>.
So for all <code>PreparedStatement</code> instances you need to specify parameters like this:</p>
</div>
<div class="listingblock">
<div class="title">Listing 4. Using parameters with a <code>PreparedStatement</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">var</span> cypher = <span class="string"><span class="delimiter">&quot;</span><span class="content">CREATE (m:Movie {title: $1})</span><span class="delimiter">&quot;</span></span>;
<span class="keyword">try</span> (<span class="type">var</span> con = <span class="predefined-type">DriverManager</span>.getConnection(url, username, password);
        <span class="predefined-type">PreparedStatement</span> stmt = con.prepareStatement(cypher);) {
    stmt.setString(<span class="integer">1</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Test</span><span class="delimiter">&quot;</span></span>);
    stmt.executeUpdate();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is independent of the SQL-to-Cypher translation mechanism:</p>
</div>
<div class="listingblock">
<div class="title">Listing 5. Using parameters with a <code>PreparedStatement</code> (SQL variant)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">var</span> sql = <span class="string"><span class="delimiter">&quot;</span><span class="content">INSERT INTO Movie (title) VALUES (?)</span><span class="delimiter">&quot;</span></span>;
<span class="keyword">try</span> (<span class="type">var</span> con = <span class="predefined-type">DriverManager</span>.getConnection(url + <span class="string"><span class="delimiter">&quot;</span><span class="content">?enableSQLTranslation=true</span><span class="delimiter">&quot;</span></span>, username, password);
        <span class="predefined-type">PreparedStatement</span> stmt = con.prepareStatement(sql);) {
    stmt.setString(<span class="integer">1</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Test</span><span class="delimiter">&quot;</span></span>);
    stmt.executeUpdate();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use named parameters, downcast the <code>PreparedStatement</code> to <code>Neo4jPreparedStatement</code>.</p>
</div>
<div class="listingblock">
<div class="title">Listing 6. Using named parameters with a <code>Neo4jPreparedStatement</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">var</span> match = <span class="string"><span class="delimiter">&quot;</span><span class="content">MATCH (n:Movie {title: $title}) RETURN n.title AS title</span><span class="delimiter">&quot;</span></span>;
<span class="keyword">try</span> (<span class="type">var</span> con = <span class="predefined-type">DriverManager</span>.getConnection(url, username, password);
        Neo4jPreparedStatement stmt = (Neo4jPreparedStatement) con.prepareStatement(match);) {
    stmt.setString(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Test</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">try</span> (<span class="type">var</span> resultSet = stmt.executeQuery()) {
        <span class="keyword">while</span> (resultSet.next()) {
            LOGGER.info(resultSet.getString(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>));
        }
    }
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="connect-dotenv">2.1. Getting a connection via environment variables</h3>
<div class="paragraph">
<p>If you are happy to depend directly on <code>org.neo4j.jdbc.Neo4jDriver</code> and want to get a connection as easy as possible, you might want to use <code>fromEnv</code>:</p>
</div>
<div class="listingblock">
<div class="title">Listing 7. Get a connection from environment variables</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// import org.neo4j.jdbc.Neo4jDriver;</span>

<span class="keyword">try</span> (<span class="type">var</span> con = Neo4jDriver.fromEnv().orElseThrow(); <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="type">var</span> stmt = con.createStatement();
        <span class="type">var</span> result = stmt.executeQuery(query)) {

    <span class="comment">// Same loop as earlier</span>
}
<span class="keyword">catch</span> (<span class="exception">SQLException</span> ex) {
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">RuntimeException</span>(ex);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Notice how we directly use the concrete driver class here and how the methods return an optional: no connection can be created if the required connection variables are not found.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>fromEnv</code> method looks for a few specific system environment variables and it adheres to the <a href="https://12factor.net">12 factor app</a> principles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, it looks in the system environment</p>
</li>
<li>
<p>Second, it looks for a file named <code>.env</code> in the current working directory. There are overloads that let you configure the directory and the filename to look for.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The supported variables are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>NEO4J_URI</code></dt>
<dd>
<p>The address or URI of the instance to connect to.</p>
</dd>
<dt class="hdlist1"><code>NEO4J_USERNAME</code></dt>
<dd>
<p>(Optional) Username.</p>
</dd>
<dt class="hdlist1"><code>NEO4J_PASSWORD</code></dt>
<dd>
<p>(Optional) Password.</p>
</dd>
<dt class="hdlist1"><code>NEO4J_SQL_TRANSLATION_ENABLED</code></dt>
<dd>
<p>(Optional) Whether to enable full SQL-to-Cypher translation, defaults to <code>false</code>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Information from both the system environment and the .env files are combined.
If for example <code>NEO4J_SQL_TRANSLATION_ENABLED</code> is in the system environment but not in the .env file, it will still be picked up.
Given the order of priority, information in the system environment always has precedence over the .env file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This feature is especially useful with Neo4j AuraDB.
When creating a new AuraDB instance, you download a <code>.env</code> file that you can directly use with the Neo4j JDBC Driver:</p>
</div>
<div class="listingblock">
<div class="title">Listing 8. Using a .env file from AuraDB</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">try</span> (
    <span class="type">var</span> con = Neo4jDriver.fromEnv(<span class="string"><span class="delimiter">&quot;</span><span class="content">Neo4j-cb3d8b2d-Created-2024-02-14.txt</span><span class="delimiter">&quot;</span></span>)
        .orElseThrow();
    <span class="type">var</span> stmt = con.createStatement();
    <span class="type">var</span> movies = stmt.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">MATCH (n:Movie) RETURN n.title AS title</span><span class="delimiter">&quot;</span></span>)
) {
    <span class="keyword">while</span> (movies.next()) {
        <span class="predefined-type">System</span>.out.println(movies.getString(<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_distribution">3. Distribution</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_driver_modules_and_dependencies">3.1. Driver modules and dependencies</h3>
<div class="paragraph">
<p>The driver consists of 3 modules:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">neo4j-jdbc</dt>
<dd>
<p>This is the actual JDBC implementation for Neo4j</p>
</dd>
<dt class="hdlist1">neo4j-jdbc-translator-spi</dt>
<dd>
<p>This is the SPI for the default SQL-to-Cypher translation implementation and for any further or custom implementation.</p>
</dd>
<dt class="hdlist1">neo4j-jdbc-translator-impl</dt>
<dd>
<p>This is the default and <strong>optional</strong> implementation of an SQL-to-Cypher translator.
It provides a somewhat opinionated approach of translating SQL statements into semantically equivalent Cypher statements.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you just want to use the Neo4j JDBC Driver to run Cypher statements, you only need the module <code>org.neo4j:neo4j-jdbc</code>. As long as you are developing in an environment with proper dependency management, this is all you need to declare.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>While the translator SPI is a required dependency and gets pulled in via Maven or Gradle, the actual implementation is not.
This allows for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Opting out of having additional dependencies if you don&#8217;t need the SQL-to-Cypher translation</p>
</li>
<li>
<p>Requiring different JDK baselines or licensing modules for our implementations</p>
</li>
<li>
<p>Allowing you to create alternative translators</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_dependencies">3.1.1. Dependencies</h4>
<div class="paragraph">
<p>There are two "dependency-free" modules, which shade everything into one binary artifact each.
Those bundles cover a lot of tooling (see <a href="#available_bundles">Available bundles</a>).</p>
</div>
<div class="paragraph">
<p>The driver&#8217;s direct, compile-time dependencies are listed below:</p>
</div>
<div class="listingblock">
<div class="title">Listing 9. Dependency tree of the core driver</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">org.neo4j:neo4j-jdbc
+- io.github.cdimascio:dotenv-java
+- io.netty:netty-handler
|  +- io.netty:netty-common
|  +- io.netty:netty-resolver
|  +- io.netty:netty-buffer
|  +- io.netty:netty-transport
|  +- io.netty:netty-transport-native-unix-common
|  \- io.netty:netty-codec
+- org.neo4j:neo4j-cypher-dsl-schema-name-support
+- org.neo4j:neo4j-jdbc-translator-spi</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="available_bundles">3.2. Available bundles</h3>
<div class="paragraph">
<p>All bundles of the Neo4j JDBC Driver are distributed on Maven Central.
The bundles have different characteristics: depending on your use-case or your environment, you can pick one or the other bundle, but not both at once.</p>
</div>
<div class="sect3">
<h4 id="_individual_components">3.2.1. Individual components</h4>
<div class="paragraph">
<p>Pick this distribution if you have an application that uses dependencies management in which you don&#8217;t have to care about dealing with binary artifacts yourself.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
We offer a Maven BOM project, which you should import when using the individual modules, so that you have always a consistent set of versions. The coordinates are <code>org.neo4j:neo4j-jdbc-bom</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For Maven, use this dependency declaration:</p>
</div>
<div class="listingblock">
<div class="title">Listing 10. Maven dependency for the core Neo4j JDBC Driver artifact</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.neo4j<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>neo4j-jdbc<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>6.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And for Gradle you would want to declare the following runtime dependency:</p>
</div>
<div class="listingblock">
<div class="title">Listing 11. Neo4j JDBC Driver as Gradle runtime dependency</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
    runtimeOnly <span class="string"><span class="delimiter">'</span><span class="content">org.neo4j:neo4j-jdbc:6.0.1-SNAPSHOT</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use the SQL-to-Cypher translation from Neo4j, you need to add the following dependency in your Maven build:</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. Maven dependency for the default SQL to Cypher translator</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.neo4j<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>neo4j-jdbc-translator-impl<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>6.0.1-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and the same coordinates, but for Gradle:</p>
</div>
<div class="listingblock">
<div class="title">Listing 13. Gradle dependency for the default SQL to Cypher translator</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
    runtimeOnly <span class="string"><span class="delimiter">'</span><span class="content">org.neo4j:neo4j-jdbc-translator-impl:6.0.1-SNAPSHOT</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="small_bundle">3.2.2. Small bundle</h4>
<div class="paragraph">
<p>Pick this distribution if you work with ETL tools or tooling for relational databases that allow adding the JDBC driver only as single artifacts or that make it unnecessary hard to add additional jars.
This bundle does not contain the default SQL-to-Cypher translator!
The coordinates of this bundle are <code>org.neo4j:neo4j-jdbc-bundle</code> and you can download it from Maven central:</p>
</div>
<div class="paragraph">
<p><a href="https://repo.maven.apache.org/maven2/org/neo4j/neo4j-jdbc-bundle/6.0.1-SNAPSHOT/neo4j-jdbc-bundle-6.0.1-SNAPSHOT.jar" class="bare">https://repo.maven.apache.org/maven2/org/neo4j/neo4j-jdbc-bundle/6.0.1-SNAPSHOT/neo4j-jdbc-bundle-6.0.1-SNAPSHOT.jar</a></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
All bundles can be used as normal project dependencies as well.
This might be useful for example if your project depends on a different, potentially conflicting Netty version.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_full_bundle">3.2.3. Full bundle</h4>
<div class="paragraph">
<p>This bundle contains the default SQL-to-Cypher translator.
Otherwise, it is identical to the <a href="#small_bundle">small bundle</a>.
Its coordinates are <code>org.neo4j:neo4j-jdbc-full-bundle</code> and you can download it from Maven central here:</p>
</div>
<div class="paragraph">
<p><a href="https://repo.maven.apache.org/maven2/org/neo4j/neo4j-jdbc-full-bundle/6.0.1-SNAPSHOT/neo4j-jdbc-full-bundle-6.0.1-SNAPSHOT.jar" class="bare">https://repo.maven.apache.org/maven2/org/neo4j/neo4j-jdbc-full-bundle/6.0.1-SNAPSHOT/neo4j-jdbc-full-bundle-6.0.1-SNAPSHOT.jar</a></p>
</div>
</div>
<div class="sect3">
<h4 id="text2cypher_bundle">3.2.4. text2cypher bundle</h4>
<div class="paragraph">
<p>We also ship a very experimental bundle that we call <code>text2cypher</code>:</p>
</div>
<div class="paragraph">
<p><a href="https://repo.maven.apache.org/maven2/org/neo4j/neo4j-jdbc-text2cypher-bundle/6.0.1-SNAPSHOT/neo4j-jdbc-text2cypher-bundle-6.0.1-SNAPSHOT.jar" class="bare">https://repo.maven.apache.org/maven2/org/neo4j/neo4j-jdbc-text2cypher-bundle/6.0.1-SNAPSHOT/neo4j-jdbc-text2cypher-bundle-6.0.1-SNAPSHOT.jar</a></p>
</div>
<div class="paragraph">
<p>See <a href="#">Neo4j JDBC Driver</a> more information.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">4. Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_driver_class_name">4.1. Driver class name</h3>
<div class="paragraph">
<p>The Neo4j JDBC Driver is <code>org.neo4j.jdbc.Neo4jDriver</code>.
With modern Java tools, you should not need to touch this class directly, but there are some connection pools and front-ends that will ask you for this.
The class is public API.</p>
</div>
<div class="paragraph">
<p>We also provide <code>org.neo4j.jdbc.Neo4jDataSource</code> as <code>javax.sql.DataSource</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_causal_clustering_and_bookmarks">4.2. Causal clustering and bookmarks</h3>
<div class="paragraph">
<p>The Neo4j JDBC Driver uses bookmarks by default to provide causal consistency in all Neo4j deployments.
Bookmarks are managed on the driver level itself, not on the connections spawned by an instance of the driver, so all connections spawned by one instance will partake in the same causal chain of transactions.
Connections from different driver instances will not use the same set of bookmarks and there is no built-in machinery that would enable this.
If you want or need this, you can directly access the <code>Neo4jDriver</code> type to retrieve the current set of known bookmarks and pass them to another driver instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_neo4j_transactional_metadata">4.3. Neo4j transactional metadata</h3>
<div class="paragraph">
<p>Neo4j supports attaching metadata to transactions, see <a href="https://neo4j.com/docs/cypher-manual/current/clauses/transaction-clauses/#query-listing-transactions"><code>SHOW TRANSACTIONS</code></a>.
As there is no explicit transaction object in the JDBC specification, the Neo4j JDBC driver needs another mechanism to make these configurable.</p>
</div>
<div class="paragraph">
<p>The JDBC driver provides the extension interface <code>Neo4jMetadataWriter</code>.
Our driver, the connection implementation, and all statement variants can be unwrapped accordingly.
The configuration is additive: metadata configured for a driver instance will be used for all connections spawned from that driver, connections can add further metadata, and  statements can also add their own metadata.
Metadata added on a statement has precedence over connection metadata which in turn has precedence over driver metadata:</p>
</div>
<div class="listingblock">
<div class="title">Listing 14. Configuring transactional metadata</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">java.sql.Connection</span>;
<span class="keyword">import</span> <span class="include">java.sql.DriverManager</span>;
<span class="keyword">import</span> <span class="include">java.sql.SQLException</span>;
<span class="keyword">import</span> <span class="include">java.sql.Statement</span>;
<span class="keyword">import</span> <span class="include">java.util.Map</span>;
<span class="keyword">import</span> <span class="include">java.util.Properties</span>;
<span class="keyword">import</span> <span class="include">java.util.logging.Level</span>;
<span class="keyword">import</span> <span class="include">java.util.logging.Logger</span>;

<span class="keyword">import</span> <span class="include">org.neo4j.jdbc.Neo4jDriver</span>;
<span class="keyword">import</span> <span class="include">org.neo4j.jdbc.Neo4jMetadataWriter</span>;

<span class="directive">public</span> <span class="directive">final</span> <span class="type">class</span> <span class="class">TransactionMetadata</span> {

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">Logger</span> LOGGER = <span class="predefined-type">Logger</span>.getLogger(TransactionMetadata.class.getPackageName());

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span>... args) <span class="directive">throws</span> <span class="exception">SQLException</span> {
        <span class="type">var</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:neo4j://localhost:7687</span><span class="delimiter">&quot;</span></span>;

        <span class="type">var</span> driver = (Neo4jDriver) <span class="predefined-type">DriverManager</span>.getDriver(url);
        driver.withMetadata(<span class="predefined-type">Map</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">md_from_driver</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">v1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">will_be_overwritten</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">irrelevant</span><span class="delimiter">&quot;</span></span>));

        <span class="type">var</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
        properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">neo4j</span><span class="delimiter">&quot;</span></span>);
        properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">verysecret</span><span class="delimiter">&quot;</span></span>);

        <span class="keyword">try</span> (
            <span class="type">var</span> con = driver.connect(url, properties)
                .unwrap(Neo4jMetadataWriter.class)
                .withMetadata(<span class="predefined-type">Map</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">md_from_connection</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">v2</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">will_be_overwritten</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">xxx</span><span class="delimiter">&quot;</span></span>))
                .unwrap(<span class="predefined-type">Connection</span>.class);
            <span class="type">var</span> statement = con.createStatement()
                .unwrap(Neo4jMetadataWriter.class)
                .withMetadata(<span class="predefined-type">Map</span>.of(<span class="string"><span class="delimiter">&quot;</span><span class="content">md_from_stmt</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">v3</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">will_be_overwritten</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">v4</span><span class="delimiter">&quot;</span></span>))
                .unwrap(<span class="predefined-type">Statement</span>.class)
        ) {
            <span class="keyword">try</span> (<span class="type">var</span> result = statement.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">SHOW TRANSACTIONS YIELD metaData</span><span class="delimiter">&quot;</span></span>)) {
                <span class="keyword">while</span> (result.next()) {
                    <span class="type">var</span> metaData = result.getObject(<span class="string"><span class="delimiter">&quot;</span><span class="content">metaData</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Map</span>.class);
                    LOGGER.log(<span class="predefined-type">Level</span>.INFO, <span class="string"><span class="delimiter">&quot;</span><span class="content">{0}</span><span class="delimiter">&quot;</span></span>, metaData);
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output will be similar to this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">Juli 17, 2024 1:18:16 PM org.neo4j.jdbc.docs.TransactionMetadata main
INFORMATION: {md_from_driver=v1, md_from_connection=v2, md_from_stmt=v3, will_be_overwritten=v4}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_url_and_connection_properties">4.4. URL and connection properties</h3>
<div class="paragraph">
<p>The canonical URL format for the Neo4j JDBC Driver is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">jdbc:neo4j://&lt;host&gt;:&lt;port&gt;/&lt;database&gt;?param1=value1&amp;param2=value2</code></pre>
</div>
</div>
<div class="paragraph">
<p>The database name and all query parameters are optional and can be omitted.
All configuration arguments can be passed either as query parameters or via a <code>java.util.Properties</code> object.
The latter is sometimes defined by tooling for you.</p>
</div>
<div class="paragraph">
<p>With regard to authentication, we recommend to follow the JDBC specification, which discourages using any form of URL authentication.
All query parameters must be <a href="https://en.wikipedia.org/wiki/Percent-encoding">percent-encoded</a> if they contain special characters, e.g. <code>&#8230;&#8203;?param1=space%20separated</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The driver supports the following URI schemes, which tweak the security configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>neo4j</code> - No encryption.</p>
</li>
<li>
<p><code>neo4j+s</code> - Enables encryption and only accepts SSL certificates from the server that are signed by a known Certificate Authority.</p>
</li>
<li>
<p><code>neo4j+ssc</code> - Enables encryption and accepts self-signed certificates (which must be added to the certificate store).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>bolt</code> URI schemes are not supported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The driver accepts the following configuration arguments, either as properties or as URL query parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Configuration arguments</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout for connection acquisition in milliseconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>agent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User agent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>neo4j-jdbc</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>enableSQLTranslation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag that enables automatic translation from SQL-to-Cypher (requires a translator on the classpath)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cacheSQLTranslations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag that enables caching of translations. SQL translations are not "free": parsing of SQL costs a bit of time, and so does Cypher rendering. In addition, we might up look up metadata to be able to project individual properties. If this takes too long, translations may be cached.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rewritePlaceholders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag that allows you to use <code>?</code> as placeholder in <strong>Cypher</strong> statements (as required by JDBC). These will automatically be rewritten into <code>$1</code>, <code>$2</code>  <code>$n</code>, starting at 1, so that the numbering matches the 1-based JDBC index.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code> when <code>enableSQLTranslation</code> is <code>false</code>, <code>false</code> otherwise</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ssl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional flag, alternative to <code>neo4j+s</code>. It can be used for example to programmatically enable the full SSL chain.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sslMode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Enum&lt;SSLMode&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional configuration for fine-grained control over SSL configuration. Allowed values are <code>disable</code>, <code>require</code>, <code>verify-full</code>. See &lt;ssl_mode, Understanding the SSL mode&gt;&gt;.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The username (principal) to use for authentication. <strong>NOT RECOMMENDED</strong> as URL query parameter for security reasons.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>neo4j</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password (credentials) to use for authentication. <strong>NOT RECOMMENDED</strong> as URL query parameter for security reasons.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authRealm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The realm to use for authentication. <strong>NOT RECOMMENDED</strong> as URL query parameter for security reasons.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authScheme</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The authentication scheme to use. <strong>NOT RECOMMENDED</strong> as URL query parameter for security reasons. Currently supported values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>basic</code> (default) for basic authentication.</p>
</li>
<li>
<p><code>bearer</code> for bearer authentication (SSO). <code>password</code> should be set to the bearer token; <code>user</code> and <code>authRealm</code> have no effect.</p>
</li>
<li>
<p><code>kerberos</code> for kerberos authentication. Requires <code>password</code> to be set to the kerberos ticket; <code>user</code> and <code>authRealm</code> have no effect.</p>
</li>
<li>
<p><code>none</code> if authentication is disabled on the server. The properties <code>user</code>, <code>password</code>, <code>authRealm</code> have no effect.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>basic</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>useBookmarks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables bookmark management for full causal cluster support. This is enabled by default and the recommended setting for all scenarios that use a connection pool.
If you disable it, it will only be disabled for the specific connection.
Other connections retrieved from the driver instance to the same or to other databases are not affected, and the individual connections will still manage their bookmarks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_getting_a_driver_or_a_connection_instance">4.5. Getting a driver or a connection instance</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section likely only applies if you use the Neo4j JDBC Driver as part of application development in contrast to using it as part of front-end tool such as <a href="https://dbeaver.io">DBeaver</a>, <a href="https://www.jetbrains.com/datagrip/">DataGrip</a> or UI-based ETL tools.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The easiest way to acquire a connection is directly through the <code>java.sql.DriverManager</code>.</p>
</div>
<div class="listingblock">
<div class="title">Listing 15. Acquiring a JDBC connection to a Neo4j server</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">java.sql.DriverManager</span>;
<span class="keyword">import</span> <span class="include">java.sql.SQLException</span>;
<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="type">class</span> <span class="class">Configuration</span> {

    <span class="type">void</span> obtainConnection() <span class="directive">throws</span> <span class="exception">SQLException</span> {

        <span class="type">var</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:neo4j://localhost:7687</span><span class="delimiter">&quot;</span></span>;
        <span class="type">var</span> username = <span class="string"><span class="delimiter">&quot;</span><span class="content">neo4j</span><span class="delimiter">&quot;</span></span>;
        <span class="type">var</span> password = <span class="string"><span class="delimiter">&quot;</span><span class="content">verysecret</span><span class="delimiter">&quot;</span></span>;
        <span class="type">var</span> connection = <span class="predefined-type">DriverManager</span>.getConnection(url, username, password);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>While our connection implementation is thread-safe, it allows only one concurrent transaction per connection (as dictated by the JDBC specification).
For a multi-thread application, use a connection pool.
There&#8217;s <a href="https://github.com/brettwooldridge/HikariCP">HikariCP</a>, but usually application server and containers/frameworks bring their own.
It&#8217;s safe to use any of them, as the Neo4j JDBC Driver does no internal pooling.</p>
</div>
<div class="paragraph">
<p>If you need access to an instance of the Neo4j driver itself, you can use the following approach:</p>
</div>
<div class="listingblock">
<div class="title">Listing 16. Acquiring an instance of the Neo4j JDBC Driver</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">java.sql.DriverManager</span>;
<span class="keyword">import</span> <span class="include">java.sql.SQLException</span>;
<span class="keyword">import</span> <span class="include">java.util.Properties</span>;

<span class="type">class</span> <span class="class">Configuration</span> {

    <span class="type">void</span> obtainDriverAndConnection() <span class="directive">throws</span> <span class="exception">SQLException</span> {

        <span class="type">var</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:neo4j://localhost:7687</span><span class="delimiter">&quot;</span></span>;
        <span class="type">var</span> driver = <span class="predefined-type">DriverManager</span>.getDriver(url);

        <span class="type">var</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
        properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">neo4j</span><span class="delimiter">&quot;</span></span>);
        properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">verysecret</span><span class="delimiter">&quot;</span></span>);
        <span class="type">var</span> connection = driver.connect(url, properties);
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_securing_your_connection_by_using_ssl">4.6. Securing your connection by using SSL</h3>
<div class="paragraph">
<p>The Neo4j JDBC Driver supports the same SSL option of the common Java driver, with the same URL protocols, using <code>+s</code> or <code>+ssc</code> as additional indicators for the required level of security.</p>
</div>
<div class="paragraph">
<p>The same configuration can also be achieved with a URL query parameter or an entry in the properties passed to the <code>DriverManager</code> or driver instance when asking for a connection.
As long as you don&#8217;t specify contradicting values, it&#8217;s fine to combine both approaches.</p>
</div>
<div class="sect3">
<h4 id="ssl-mode">4.6.1. Understanding the SSL mode</h4>
<div class="paragraph">
<p>The following list is ordered by ascending security:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>disable</code>&#8201;&#8212;&#8201;(default), "I don&#8217;t care about security and don&#8217;t want to pay the overhead for encryption."</p>
</li>
<li>
<p><code>require</code>&#8201;&#8212;&#8201;"I want my data to be encrypted, and I accept the overhead. I trust that the network will make sure I always connect to the server I want." (Server must support encryption, no hostname/CA validation is done. This saves the hassle of proper certificates and is only secure on private networks; it should not really be used over public networks.)</p>
</li>
<li>
<p><code>verify-full</code>&#8201;&#8212;&#8201;"I want my data encrypted, and I accept the overhead. I want to be sure that I connect to a server I trust, and that it&#8217;s the one I specify."</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Neo4j JDBC Driver does not include revocation checks.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The most secure option can also be enabled by setting <code>ssl=true</code> either as query parameter or as property entry passed to the <code>DriverManager</code>.
This option corresponds to <code>neo4j+s</code>.
On the other hand, <code>require</code> corresponds to <code>neo4j+ssc</code>.</p>
</div>
<div class="paragraph">
<p>The additional enum allows us to possibly support additional modes in the future, such as letting the service decide about SSL, or being able to express a preference towards SSL without requiring it.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Neo4j servers can offer both plain Bolt connections and encrypted SSL connection, or just one of them. The fact that you can connect using <code>neo4j+s</code> does not mean that you cannot connect using just <code>neo4j</code>, or viceversa. This is dependent on the server setup. <a href="https://neo4j.com/cloud/platform/aura-graph-database/">Neo4j Aura</a>, Neo4j&#8217;s managed cloud service, only supports encrypted connections, so you <em>must</em> use <code>+s</code>, <code>ssl=true</code>, or <code>sslMode=verify-full</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_valid_urls">4.6.2. Valid URLs</h4>
<div class="paragraph">
<p>The following URLs are all valid:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>neo4j+s://xyz.databases.neo4j.io</code></dt>
<dd>
<p>Use full verification with the <code>xzy</code> instance at AuraDB</p>
</dd>
<dt class="hdlist1"><code>neo4j://xyz.databases.neo4j.io?ssl=true</code></dt>
<dd>
<p>The same, but using the shorthand URL parameter</p>
</dd>
<dt class="hdlist1"><code>neo4j://xyz.databases.neo4j.io?sslMode=verfiy-full</code></dt>
<dd>
<p>The same, but using the explicit mode</p>
</dd>
<dt class="hdlist1"><code>neo4j+s://xyz.databases.neo4j.io?ssl=true&amp;sslMode=verify-full</code></dt>
<dd>
<p>Not more secure, but does not fail on you</p>
</dd>
<dt class="hdlist1"><code>neo4j+ssc://this.is.a.trustworthy.instance.for.sure.com</code></dt>
<dd>
<p>Trust whatever certificate and hostname there is, but do use SSL</p>
</dd>
<dt class="hdlist1"><code>neo4j://my-testing-instance.local</code></dt>
<dd>
<p>Use a plain connection.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The driver only refuses contradicting configurations, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>+s</code> with <code>ssl=false</code>, or <code>sslMode</code> set to <code>disable</code></p>
</li>
<li>
<p><code>+ssc</code> with <code>ssl=false</code>, or any <code>sslmode</code> not equal to <code>require</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Basically, you cannot ask to use SSL and not use it at the same time.
The driver offers several mechanism so that you can use a fixed URL with dynamic query parameters, or dynamic URLs, or whatever way of configuring you prefer in a programmatic way.</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_dotenv_files">4.6.3. Using .dotenv files</h4>
<div class="paragraph">
<p>When you create a <a href="https://neo4j.com/cloud/platform/aura-graph-database/">Neo4j Aura</a> instance, you will be asked to download a text-file named similar to <code>Neo4j-9df57663-Created-2023-06-12.txt</code>.
This is essentially a <a href="https://www.dotenv.org">.dotenv</a> file containing the information required to connect to the database.</p>
</div>
<div class="paragraph">
<p>These files can be directly used via <code>Neo4jDriver.fromEnv()</code> (see <a href="#connect-dotenv">Getting a connection via environment variables</a>).
This method exists in several overloads, which let you configure both filename and directory.
Additionally, the builder lets you configure options that are not contained in the files from Aura.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_metadata">5. Metadata</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_catalog_and_schema">5.1. Catalog and schema</h3>
<div class="paragraph">
<p>All the methods on connection level dealing with metadata and information about the available content provide information in terms that are defined in the SQL standard, including catalogs and schemas.</p>
</div>
<div class="paragraph">
<p>In most relational databases, a catalog is equivalent to a specific database on a server or cluster, and the schema refers to the collection of tables, views and procedures in that catalog.</p>
</div>
<div class="paragraph">
<p>From the SQL 1992 standard (find an archived copy <a href="http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt">here</a>):</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>(4.12) Catalogs are named collections of schemas in an SQL-environment. An SQL-environment contains zero or more catalogs. A catalog contains one or more schemas, but always contains a schema named INFORMATION_SCHEMA that contains the views and domains of the Information Schema.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>This driver does not support catalogs (see <a href="https://github.com/neo4j/neo4j-jdbc/discussions/55">discussion 55</a>), so any metadata result set will return literal <code>null</code> when asked for the catalog of a database object.
No metadata method supports filtering on a non-null catalog parameter and no catalog specifier can be used in a query.
Future developments might use catalogs to describe composite databases, in essence listing the constituents of the composite database defined in the connection.</p>
</div>
<div class="paragraph">
<p>The same standard defines schemas as follows:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>(4.11) An SQL-schema is a persistent descriptor that includes:</p>
</div>
<div class="paragraph">
<p>[] the descriptor of every component of the SQL-schema.</p>
</div>
<div class="paragraph">
<p>In this International Standard, the term "schema" is used only
in the sense of SQL-schema. Each component descriptor is either
a domain descriptor, a base table descriptor, a view descriptor,
an assertion descriptor, a privilege descriptor, a character set
descriptor, a collation descriptor, or a translation descriptor.
The persistent objects described by the descriptors are said to be
owned by or to have been created by the &lt;authorization identifier&gt;
of the schema.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>We report the literal name <code>public</code> as schema for any result component of a metadata result set.
We support querying for objects in any schema, however only literal <code>null</code> or <code>public</code> will potentially produce a result.</p>
</div>
<div class="paragraph">
<p>Labels will be reported as table objects with the <code>TABLE_TYPE</code> being literal <code>TABLE</code>.</p>
</div>
<div class="sect3">
<h4 id="_summary">5.1.1. Summary</h4>
<div class="ulist">
<ul>
<li>
<p>Catalog: Always <code>null</code>; filtering on anything non-null yields no results.</p>
</li>
<li>
<p>Schema: Always <code>public</code>; filtering on <code>public</code> and literal will yield result, anything else won&#8217;t.</p>
</li>
<li>
<p>Table descriptors: Reported as <code>TABLE</code> in the <code>TABLE_TYPE</code> column.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_labels_to_tables">5.2. Labels to tables</h3>
<div class="paragraph">
<p>The CLG and Langstar groups speak about "Node type combinations" and gravitate towards "open node type semantics" in the GQL standard:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Node type combinations is a less permissive form of open node type semantics. The idea of node type combinations is that nodes also conform to a graph type if they are not of one of the node types in the node type set of the graph type, but of a node type that is an intersection of (a subset of) the node type in a node type set of the graph type.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>An example for their proposal can be found <a href="https://urban-adventure-ov6lvqn.pages.github.io/?s=eyJjaGVja2VkIjp0cnVlLCJncmFwaFR5cGVJbnB1dCI6Iig6QSB7YTo6SU5UfSAuLi4pXG4oOkIge2I6OklOVH0gLi4uKSIsImdyYXBoSW5wdXQiOiIoYWI6QSZCIHthOjUsIGI6NX0pIiwib3B0aW9ucyI6WyJPcGVuIGVkZ2UgdHlwZXMgYWxsb3dlZCIsIklOSjEiLCJPcGVuIG5vZGUgdHlwZXMgYWxsb3dlZCIsIk9wZW4gZ3JhcGggdHlwZSBzZW1hbnRpY3MgKEdUUzIpIiwiT3BlbiBlbmRwb2ludCB0eXBlcyBhbGxvd2VkIiwiQ2xvc2VkIGVkZ2UgdHlwZXMgZGlzYWxsb3dlZCIsIkNsb3NlZCBub2RlIHR5cGVzIGRpc2FsbG93ZWQiLCJDbG9zZWQgZW5kcG9pbnQgdHlwZXMgZGlzYWxsb3dlZCIsIlNpbmdsZSBsYWJlbCBhbGxvd2VkIChFUEEyKSIsIkVUSTEiLCJOVEkyIl19">here</a>.</p>
</div>
<div class="paragraph">
<p>This driver therefore compute node types in a similar way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Single label nodes will map naturally to a table name, the single label will become the table name</p>
<div class="ulist">
<ul>
<li>
<p>The label name will be taken as is and will be case-sensitive. The labels <code>Movie</code>, <code>movie</code>, <code>MOVIE</code> will result in three tables in the metadata</p>
</li>
<li>
<p>This is in line with the default SQL-to-Cypher translation</p>
</li>
</ul>
</div>
</li>
<li>
<p>Node type combinations will map to table names composed as <code>label1_label2</code>, sorting the labels alphabetically to make them independent of the order Neo4j returns them</p>
</li>
<li>
<p>Property sets for these node type combinations will then be computed</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="s2c_introduction">6. SQL to Cypher translation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_2">6.1. Introduction</h3>
<div class="paragraph">
<p>The translation of queries from SQL to Cypher is an optional feature of this driver and it consists of two parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The translator SPI, located in the module <code>org.neo4j:neo4j-jdbc-translator-spi</code>.
It consists of two interfaces: <code>SqlTranslatorFactory</code> and the actual <code>SqlTranslator</code>.</p>
</li>
<li>
<p>A concrete implementation of this SPI, published as <code>org.neo4j:neo4j-jdbc-translator-impl</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The latter is covered in "<a href="#s2c">Using the default translator</a>" and available in the "full bundle", described in <a href="#available_bundles">Available bundles</a>.
The former is provided for two reasons: it allows us to distribute the driver with and without the bundled, default translator and allows you to run your custom translator.</p>
</div>
<div class="paragraph">
<p>Translators can be chained, and there can be as many translators on the classpath as you want.
Their precedence is configurable, with our default implementation having the lowest precedence.
Thus, you can for example have a custom translator that takes care of a fixed set of queries and, if it receives a query it cannot translate, it will pass it down to our implementation.</p>
</div>
<div class="paragraph">
<p>Translating arbitrary SQL queries to Cypher is an opinionated task, as there is no right way to map table names to graph objects: a table name can be used as-is as a label, or may be transformed into a singular form, etc. Mapping relationships is even trickier: should relationship types derive from a join table, a join column (in that case, which one?), or a foreign key?</p>
</div>
<div class="paragraph">
<p>We believe our assumptions are appropriate for various use cases and instead of providing configuration to cater for all scenarios, we offer the possibility to write your own translation layer.
The driver will use the standard Java service loader mechanism to find an implementation of the SPI on the module- or classpath.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Some tools (like Tableau) use a class-loader that won&#8217;t let the driver use the standard Java service loader mechanism.
For these scenarios, we provide an additional configuration property named <code>translatorFactory</code>.
Set this to <code>DEFAULT</code> to directly load our default implementation or to a fully-qualified classname for any other factory.
<strong>Be aware</strong> that either our default implementation or your custom one must be on the classpath.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_translating_sql_to_cypher">6.2. Translating SQL to Cypher</h3>
<div class="paragraph">
<p>There&#8217;s only one requirement to enable the SQL-to-Cypher translation: you have to have one module implementing the SPI on the classpath.
This is <strong>automatically</strong> the case if you use the full-bundle (<code>org.neo4j:neo4j-jdbc-full-bundle</code>).
In that case, you <strong>don&#8217;t</strong> need to add any other dependency.
If you use the individual distribution or the "small" bundle <code>org.neo4j:neo4j-jdbc-bundle</code>, you must add the artifact <code>org.neo4j:neo4j-jdbc-translator-impl</code>.</p>
</div>
<div class="paragraph">
<p>The implementation will be automatically loaded.
If you use the translation on a case-by-case basis, it will be lazily loaded (i.e no additional classes are touched or loaded into memory).
If you configure automatic translation for all statements, the implementation will be eagerly loaded.
There are no further configuration options with regard to loading the implementation.</p>
</div>
<div class="sect3">
<h4 id="_on_a_case_by_case_basis">6.2.1. On a case-by-case basis</h4>
<div class="paragraph">
<p>The translator can be used on a case-by-case basis through the official JDBC API <code>nativeSQL</code>, which you find on the <code>java.sql.Connection</code> class.
With the following imports:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">java.sql.DriverManager</span>;
<span class="keyword">import</span> <span class="include">java.sql.SQLException</span>;
<span class="keyword">import</span> <span class="include">java.util.Properties</span>;
<span class="keyword">import</span> <span class="include">java.util.logging.Logger</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You just pass your SQL statement to <code>nativeSQL</code> and you will get Cypher back:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">try</span> (<span class="type">var</span> connection = <span class="predefined-type">DriverManager</span>.getConnection(url, username, password)) {
    <span class="type">var</span> sql = connection.nativeSQL(<span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT * FROM Movie n</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">assert</span> <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="content">
            MATCH (n:Movie)
            RETURN *</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>.equals(sql);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_for_all_queries">6.2.2. For all queries</h4>
<div class="paragraph">
<p>If you open the connection to your Neo4j instance using <code>enableSQLTranslation=true</code> either as URL parameter or configuration property, all statements will be translated from SQL to Cypher.
If you configure the driver in this way, the translator will be eagerly loaded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">var</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:neo4j://localhost:7687?enableSQLTranslation=true</span><span class="delimiter">&quot;</span></span>;
<span class="keyword">try</span> (<span class="type">var</span> connection = <span class="predefined-type">DriverManager</span>.getConnection(url, username, password);
        <span class="type">var</span> stmnt = connection.createStatement();
        <span class="type">var</span> result = stmnt.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT n.title FROM Movie n</span><span class="delimiter">&quot;</span></span>)) {
    <span class="keyword">while</span> (result.next()) {
        LOGGER.info(result.getString(<span class="string"><span class="delimiter">&quot;</span><span class="content">n.title</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sometimes you may need to fall back to Cypher for some statements, either to use constructs that you cannot express with SQL, or because our default translator cannot handle your query.
We offer a special comment that you can use as a hint in your statement to stop automatic translation: <code>/*+ NEO4J FORCE_CYPHER */</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">var</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:neo4j://localhost:7687?enableSQLTranslation=true</span><span class="delimiter">&quot;</span></span>;
<span class="type">var</span> query = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="content">
        /*+ NEO4J FORCE_CYPHER */
        MATCH (:Station { name: 'Denmark Hill' })&lt;-[:CALLS_AT]-(d:Stop)
            ((:Stop)-[:NEXT]-&gt;(:Stop)){1,3}
            (a:Stop)-[:CALLS_AT]-&gt;(:Station { name: 'Clapham Junction' })
        RETURN localtime(d.departs) AS departureTime,
            localtime(a.arrives) AS arrivalTime
        </span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
<span class="keyword">try</span> (<span class="type">var</span> connection = <span class="predefined-type">DriverManager</span>.getConnection(url, username, password);
        <span class="type">var</span> stmnt = connection.createStatement();
        <span class="type">var</span> result = stmnt.executeQuery(query)) {
    <span class="keyword">while</span> (result.next()) {
        LOGGER.info(result.getTime(<span class="string"><span class="delimiter">&quot;</span><span class="content">departureTime</span><span class="delimiter">&quot;</span></span>).toString());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_possible_error_scenarios">6.2.3. Possible error scenarios</h4>
<div class="paragraph">
<p>A <code>NoSuchElementException</code> with a message of <code>No SQL translators available</code> will be thrown when there is no implementation of the SQL to Cypher translator available, and you either used <code>java.sql.Connection.nativeSQL</code> or enabled automatic translation. The exception will be thrown when you access the method or eagerly on opening a connection in the latter case.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="s2c">6.3. Using the default translator</h3>
<div class="sect3">
<h4 id="_supported_sql_dialects">6.3.1. Supported SQL dialects</h4>
<div class="paragraph">
<p>Our default translator uses the OSS parser from <a href="https://www.jooq.org">jOOQ</a>, which supports a broad spectrum of SQL dialects already.
We picked the generic, default dialect of jOOQ as our default dialect, but you can overwrite this in the SQL to Cypher configuration using the parameter <code>s2c.sqlDialect</code> with one of the supported dialects listed in <a href="#s2c_configuration">configuration below</a>.
<code>POSTGRES</code> can be a good choice for several integrations.</p>
</div>
<div class="paragraph">
<p>Bear in mind though that any shortcomings in the translation are probably not due to a lack in the parser, but due to the lack of an obvious, semantically equivalent Cypher construct.
That means we might be able to parse a certain piece of SQL, but are unable to translate in into something meaningful that Neo4j can understand without additional, contextual information.</p>
</div>
</div>
<div class="sect3">
<h4 id="s2c_configuration">6.3.2. Configuration</h4>
<div class="paragraph">
<p>The default implementation provides a number of configuration settings.
They must be prefixed with <code>s2c</code> in the URL or config options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parseNameCase</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to parse table names as is or not.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tableToLabelMappings</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A map from table names to labels.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An empty map</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>joinColumnsToTypeMappings</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A map from column names to relationship types.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An empty map</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prettyPrint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to format the generated Cypher or not.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>alwaysEscapeNames</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to always escape names.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unless explicitly configured <code>false</code> when pretty printing is on, otherwise <code>true</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sqlDialect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Which dialect to use when parsing. Supported values are <code>POSTGRES</code>, <code>SQLITE</code>, <code>MYSQL</code>, <code>H2</code>, <code>HSQLDB</code>, <code>DERBY</code> and <code>DEFAULT</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DEFAULT</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The next few examples use the <code>properties</code> config to avoid terrible long URLs in this documentation, but all the attributes can be specified via URL as well.</p>
</div>
<div class="listingblock">
<div class="title">Listing 17. Disable pretty printing; only escape if necessary; configure dedicated table mappings</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">var</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">neo4j</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">verysecret</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">enableSQLTranslation</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">s2c.prettyPrint</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">s2c.alwaysEscapeNames</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">s2c.tableToLabelMappings</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">people:Person;movies:Movie;movie_actors:ACTED_IN</span><span class="delimiter">&quot;</span></span>);

<span class="type">var</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:neo4j://localhost:7687</span><span class="delimiter">&quot;</span></span>;
<span class="type">var</span> query = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="content">
        SELECT p.name, m.title
        FROM people p
        JOIN movie_actors r ON r.person_id = p.id
        JOIN movies m ON m.id = r.person_id</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
<span class="keyword">try</span> (<span class="type">var</span> connection = <span class="predefined-type">DriverManager</span>.getConnection(url, properties)) {
    <span class="type">var</span> sql = connection.nativeSQL(query);
    <span class="keyword">assert</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">MATCH (p:Person)-[r:ACTED_IN]-&gt;(m:Movie) RETURN p.name, m.title</span><span class="delimiter">&quot;</span></span>.equals(sql);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 18. Parse table names into upper case</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">var</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">neo4j</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">verysecret</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">enableSQLTranslation</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">s2c.parseNameCase</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">UPPER</span><span class="delimiter">&quot;</span></span>);

<span class="type">var</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:neo4j://localhost:7687</span><span class="delimiter">&quot;</span></span>;
<span class="type">var</span> query = <span class="string"><span class="delimiter">&quot;</span><span class="content">SELECT * FROM people</span><span class="delimiter">&quot;</span></span>;
<span class="keyword">try</span> (<span class="type">var</span> connection = <span class="predefined-type">DriverManager</span>.getConnection(url, properties)) {
    <span class="type">var</span> sql = connection.nativeSQL(query);
    <span class="keyword">assert</span> <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="content">
            MATCH (people:PEOPLE)
            RETURN *</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>.equals(sql);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Named parameter syntax in the SQL parser defaults to <code>:name</code> (such as supported by Oracle, JPA, Spring, a colon followed by a name).
The following example changes that prefix to <code>$</code> (the same prefix that Cypher uses):</p>
</div>
<div class="listingblock">
<div class="title">Listing 19. Change parameters prefix and add mappings for join columns</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">var</span> properties = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">neo4j</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">verysecret</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">enableSQLTranslation</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">s2c.parseNamedParamPrefix</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">$</span><span class="delimiter">&quot;</span></span>);
properties.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">s2c.joinColumnsToTypeMappings</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">people.movie_id:DIRECTED</span><span class="delimiter">&quot;</span></span>);

<span class="type">var</span> url = <span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc:neo4j://localhost:7687</span><span class="delimiter">&quot;</span></span>;
<span class="type">var</span> query = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="content">
        SELECT *
        FROM people p
        JOIN movies m ON m.id = p.movie_id
        WHERE p.name = $1
        </span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>;
<span class="keyword">try</span> (<span class="type">var</span> connection = <span class="predefined-type">DriverManager</span>.getConnection(url, properties)) {
    <span class="type">var</span> sql = connection.nativeSQL(query);
    <span class="keyword">assert</span> <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="content">
            MATCH (p:people)-[:DIRECTED]-&gt;(m:movies)
            WHERE p.name = $1
            RETURN *</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>.equals(sql);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is helpful when a tool generates names like that and does not allow customization.</p>
</div>
</div>
<div class="sect3">
<h4 id="s2c_supported_statements">6.3.3. Supported statements</h4>
<div class="paragraph">
<p>The following statements are all under tests and describe what you can expect from the default translation layer:</p>
</div>
</div>
<div class="sect3">
<h4 id="_translation_concepts">6.3.4. Translation concepts</h4>
<div class="sect4">
<h5 id="_table_names_to_labels">Table names to labels</h5>
<div class="paragraph">
<p>The most simple <code>SELECT</code> statement to translate is one without <code>FROM</code> clause, such as:</p>
</div>
<div id="t1_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="integer">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is equivalent to a Cypher <code>RETURN</code>:</p>
</div>
<div id="t1_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN 1</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>SELECT</code> statements without <code>JOIN</code> clauses are pretty straightforward to translate.
The challenge here is how to map the table name to labels:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We parse the SQL statement case-sensitive by default</p>
</li>
<li>
<p>Table names are mapped to node labels</p>
</li>
<li>
<p>Table aliases are used as identifiable symbolic names</p>
</li>
</ul>
</div>
<div id="t1_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> t.a, t.b
<span class="keyword">FROM</span> My_Table <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="keyword">AS</span> t <i class="conum" data-value="2"></i><b>(2)</b>
<span class="keyword">WHERE</span> t.a = <span class="integer">1</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Will be used as the label to match, as-is, i.e. <code>My_Table</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The table alias will become the node alias</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The whole construct will be translated to</p>
</div>
<div id="t1_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (t:My_Table)
WHERE t.a = 1
RETURN t.a, t.b</code></pre>
</div>
</div>
<div class="paragraph">
<p>Table aliases are optional, if you omit them, we derive aliases from the labels and types.
If you inspect the translated queries, we recommend using aliases, as this makes the queries better readable.</p>
</div>
</div>
<div class="sect4">
<h5 id="s2c_star_selects">Star-Selects</h5>
<div class="paragraph">
<p>A star- or <code>*</code>- select comes in different forms:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Unqualified</dt>
<dd>
<p><code>SELECT * FROM table</code></p>
</dd>
<dt class="hdlist1">Qualified</dt>
<dd>
<p><code>SELECT t.* FROM table t</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>And a variant, selecting the relation itself: <code>SELECT t FROM table t</code>.</p>
</div>
<div class="paragraph">
<p>We make use of this to let you decide whether you want to return Neo4j nodes and relationships as entities, maps, or flattened to individual columns.
The latter requires our translator to have access to the schema of the underlying Neo4j database.
The following sections describe the use-cases.</p>
</div>
<div class="sect5">
<h6 id="_projecting_individual_properties">Projecting individual properties</h6>
<div class="paragraph">
<p>Don&#8217;t use a star-select but enumerate the properties:</p>
</div>
<div id="star_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> m.title <span class="keyword">FROM</span> Movie m</code></pre>
</div>
</div>
<div class="paragraph">
<p>The table alias will be used as a symbolic name:</p>
</div>
<div id="star_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (m:Movie)
RETURN m.title;</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>You can omit the table alias:</p>
</div>
<div id="star_2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> title <span class="keyword">FROM</span> Movie</code></pre>
</div>
</div>
<div class="paragraph">
<p>The lower-cased table name will be the symbolic name:</p>
</div>
<div id="star_2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (movie:Movie)
RETURN movie.title;</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>Accessing JDBC columns by name leads to code that is hard to maintain, as column renamings impact code as well.
To avoid this, alias the column:</p>
</div>
<div id="star_3" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> title <span class="keyword">AS</span> title <span class="keyword">FROM</span> Movie</code></pre>
</div>
</div>
<div class="paragraph">
<p>So that it has a stable, well-known name:</p>
</div>
<div id="star_3_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (movie:Movie)
RETURN movie.title AS title;</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_projecting_all_properties">Projecting all properties</h6>
<div class="paragraph">
<p>A <code>SELECT *</code> statement gets translated differently depending on whether the connection to the Neo4j database is available.</p>
</div>
<div id="star_5" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> Person p</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are offline, you will get the following Cypher statement:</p>
</div>
<div id="star_5_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person) RETURN *</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above query will return one column (<code>p</code>) containing a Neo4j node.
This is usually not what you expect in the relational world.
If you run the translation online and Neo4j metadata can be retrieved,
you will get a statement that flattens the properties of each node and relationship, plus their element IDs:</p>
</div>
<div class="paragraph">
<p>In case the <code>Person</code> node has properties <code>born</code> and <code>name</code>,</p>
</div>
<div id="star_6" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> Person p</code></pre>
</div>
</div>
<div class="paragraph">
<p>you will get this Cypher statement</p>
</div>
<div id="star_6_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)
RETURN elementId(p) AS element_id,
       p.born AS born, p.name AS name</code></pre>
</div>
</div>
<div class="paragraph">
<p>This works well with multiple tables as well (<code>Movie</code> has properties <code>title</code> and <code>released</code>):</p>
</div>
<div id="star_7" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> Person p <span class="keyword">JOIN</span> Movie m <span class="keyword">ON</span> m.id = p.acted_in</code></pre>
</div>
</div>
<div id="star_7_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[acted_in:ACTED_IN]-&gt;(m:Movie)
RETURN elementId(p) AS element_id, p.born AS born, p.name AS name,
       elementId(m) AS element_id1, m.title AS title, m.released AS released</code></pre>
</div>
</div>
<div class="paragraph">
<p>We append increasing numbers to column names to clashing ones (ex. with <code>name</code> and <code>remark</code> properties both in <code>Movie</code> and <code>Person</code>):</p>
</div>
<div id="star_8" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> Person p <span class="keyword">JOIN</span> Movie m <span class="keyword">ON</span> m.id = p.acted_in</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the increasing numbers per duplicate name:</p>
</div>
<div id="star_8_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[acted_in:ACTED_IN]-&gt;(m:Movie)
RETURN elementId(p) AS element_id,
       p.born AS born, p.name AS name, p.remark AS remark,
       elementId(m) AS element_id1,
       m.name AS name1, m.released AS released, m.remark AS remark1</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>The following example uses a join-table to access relationships (we explain this later in this manual <a href="#joinin-relationships">when discussing joins</a>), and the flattening of properties works here as well:</p>
</div>
<div id="star_9" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> *
<span class="keyword">FROM</span> people p
<span class="keyword">JOIN</span> movie_actors r <span class="keyword">ON</span> r.person_id = p.id
<span class="keyword">JOIN</span> movies m <span class="keyword">ON</span> m.id = r.person_id</code></pre>
</div>
</div>
<div id="star_9_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[r:ACTED_IN]-&gt;(m:Movie)
RETURN elementId(p) AS element_id,
       p.born AS born, p.name AS name,
       elementId(r) AS element_id1, r.role AS role,
       elementId(m) AS element_id2,
       m.title AS title, m.released AS released</code></pre>
</div>
</div>
<hr>
<div id="star_6b" class="listingblock">
<div class="title">Listing 20. Ordering without specifying a table alias</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> Person p <span class="keyword">ORDER</span> <span class="keyword">BY</span> name <span class="directive">ASC</span></code></pre>
</div>
</div>
<div id="star_6b_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)
RETURN elementId(p) AS element_id,
       p.born AS born, p.name AS name
ORDER BY p.name</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>A qualified alias can be used as well.
If no Neo4j metadata is available, you will get a map of properties of the node/relationship:</p>
</div>
<div id="star_4" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> m.*, p.*
<span class="keyword">FROM</span> Person p
<span class="keyword">JOIN</span> Movie m <span class="keyword">ON</span> m.id = p.acted_in</code></pre>
</div>
</div>
<div class="paragraph">
<p>The corresponding columns must be downcast to a map in JDBC:</p>
</div>
<div id="star_4_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[acted_in:ACTED_IN]-&gt;(m:Movie)
RETURN m{.*} AS m, p{.*} AS p</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>If we add more data (ex. <code>born</code> and <code>name</code> to <code>Person</code>), the qualified star will project all of them (note how we also project one single, known column from the <code>Movie</code> table):</p>
</div>
<div id="star_4a" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p.*, m.title <span class="keyword">AS</span> title
<span class="keyword">FROM</span> Person p
<span class="keyword">JOIN</span> Movie m <span class="keyword">ON</span> m.id = p.acted_in</code></pre>
</div>
</div>
<div id="star_4a_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[acted_in:ACTED_IN]-&gt;(m:Movie)
RETURN elementId(p) AS element_id, p.born AS born, p.name AS name, m.title AS title</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_returning_nodes_and_relationships">Returning nodes and relationships</h6>
<div class="paragraph">
<p>A statement that projects a table alias such as</p>
</div>
<div id="star_n" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> m <span class="keyword">FROM</span> Movie m</code></pre>
</div>
</div>
<div class="paragraph">
<p>will result in a Cypher statement returning the matched node as node.</p>
</div>
<div id="star_n_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (m:Movie)
RETURN m;</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>A node can be aliased as well:</p>
</div>
<div id="star_n2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> m <span class="keyword">AS</span> node <span class="keyword">FROM</span> Movie m</code></pre>
</div>
</div>
<div id="star_n2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (m:Movie)
RETURN m AS node;</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>Un-aliased tables can be used as well:</p>
</div>
<div id="star_n3" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> movie <span class="keyword">FROM</span> Movie</code></pre>
</div>
</div>
<div id="star_n3_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (movie:Movie)
RETURN movie;</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>Multiple entities are supported, too:</p>
</div>
<div id="star_10" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p, r, m <span class="keyword">FROM</span> Person p
<span class="keyword">JOIN</span> ACTED_IN r <span class="keyword">ON</span> r.person_id = p.id
<span class="keyword">JOIN</span> Movie m <span class="keyword">ON</span> m.id = r.movie_id</code></pre>
</div>
</div>
<div id="star_10_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[r:ACTED_IN]-&gt;(m:Movie) RETURN p, r, m</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_comparing_sql_with_cypher_examples">Comparing SQL with Cypher examples</h5>
<div class="paragraph">
<p>The source of the following examples is: <a href="https://neo4j.com/developer/cypher/guide-sql-to-cypher/">Comparing SQL with Cypher</a>.</p>
</div>
<div class="sect5">
<h6 id="_find_all_products">Find all Products</h6>

</div>
<div class="sect5">
<h6 id="_select_and_return_records">Select and Return Records</h6>
<div class="paragraph">
<p>Select everything from the <code>products</code> table.</p>
</div>
<div id="t2_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p.*
<span class="keyword">FROM</span> products <span class="keyword">as</span> p</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, in Cypher, you just <code>MATCH</code> a simple pattern: all nodes with the <strong>label</strong> <code>Product</code> and <code>RETURN</code> them.</p>
</div>
<div id="t2_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Product)
RETURN p{.*} AS p</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>The above query will project all properties of the matched node.
If you want to return the node itself, select it without using the asterisk:</p>
</div>
<div id="t2_0a" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p
<span class="keyword">FROM</span> products <span class="keyword">as</span> p</code></pre>
</div>
</div>
<div id="t2_0a_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Product)
RETURN p</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_field_access_ordering_and_paging">Field Access, Ordering and Paging</h6>
<div class="paragraph">
<p><strong>It is more efficient to return only a subset of attributes</strong>, like <code>ProductName</code> and <code>UnitPrice</code>.
And while we are at it, let&#8217;s also order by price and only return the 10 most expensive items.
(Remember that labels, relationship-types and property-names are <strong>case sensitive</strong> in Neo4j.)</p>
</div>
<div id="t2_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p.<span class="string"><span class="delimiter">`</span><span class="content">productName</span><span class="delimiter">`</span></span>, p.<span class="string"><span class="delimiter">`</span><span class="content">unitPrice</span><span class="delimiter">`</span></span>
<span class="keyword">FROM</span> products <span class="keyword">as</span> p
<span class="keyword">ORDER</span> <span class="keyword">BY</span> p.<span class="string"><span class="delimiter">`</span><span class="content">unitPrice</span><span class="delimiter">`</span></span> <span class="directive">DESC</span>
LIMIT <span class="integer">10</span></code></pre>
</div>
</div>
<div id="t2_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Product)
RETURN p.productName, p.unitPrice ORDER BY p.unitPrice DESC LIMIT 10</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>The default order direction will be translated as is:</p>
</div>
<div id="t2_2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> Movies m <span class="keyword">ORDER</span> <span class="keyword">BY</span> m.title</code></pre>
</div>
</div>
<div id="t2_2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (m:Movies)
RETURN * ORDER BY m.title</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_distinct_projections"><code>DISTINCT</code> projections</h6>
<div class="paragraph">
<p>The <code>DISTINCT</code> keyword for projections is handled:</p>
</div>
<div id="t3_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> m.released <span class="keyword">FROM</span> Movies m</code></pre>
</div>
</div>
<div id="t3_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (m:Movies)
RETURN DISTINCT m.released</code></pre>
</div>
</div>
<div class="paragraph">
<p>It works with <code>*</code> projections as well:</p>
</div>
<div id="t3_2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> m.* <span class="keyword">FROM</span> Movies m</code></pre>
</div>
</div>
<div id="t3_2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (m:Movies)
RETURN DISTINCT m {.*} AS m</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, as the qualified asterisks will use metadata if available, the translation with a database connection is different:</p>
</div>
<div id="t3_3" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="keyword">DISTINCT</span> m.* <span class="keyword">FROM</span> Movies m</code></pre>
</div>
</div>
<div id="t3_3_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (m:Movies)
RETURN DISTINCT elementId(m) AS element_id, m.title AS title, m.released AS released</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that each row includes the Neo4j element ID, making each row unique.
This being said, the <code>DISCTINCT</code> clause is of limited use with the asterisk.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_expressions">6.3.5. Expressions</h4>
<div class="paragraph">
<p>Most SQL expressions have corresponding Cypher expressions and can be translated straightforward.</p>
</div>
<div class="sect4">
<h5 id="_literal_values">Literal Values</h5>
<div class="paragraph">
<p>Literal values are 1:1 translations.</p>
</div>
<div id="e0_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span>
    <span class="integer">1</span>, <span class="predefined-constant">TRUE</span>, <span class="predefined-constant">FALSE</span>, <span class="predefined-constant">NULL</span>, <span class="string"><span class="delimiter">'</span><span class="content">a</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div id="e0_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN 1, TRUE, FALSE, NULL, 'a'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_arithmetic_expressions">Arithmetic expressions</h5>
<div class="paragraph">
<p>Arithmetic expressions are 1:1 translations.</p>
</div>
<div id="e1_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span>
    <span class="integer">1</span> + <span class="integer">2</span>,
    <span class="integer">1</span> - <span class="integer">2</span>,
    <span class="integer">1</span> * <span class="integer">2</span>,
    <span class="integer">1</span> / <span class="integer">2</span>,
    square(<span class="integer">2</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the underlying tech of the default translator uses <a href="https://github.com/neo4j-contrib/cypher-dsl">Cypher-DSL</a> internally, which will wrap arithmetic (and logical) expressions with parentheses:</p>
</div>
<div id="e1_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN
    (1 + 2),
    (1 - 2),
    (1 * 2),
    (1 / 2),
    (2 * 2)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_functions">Functions</h5>
<div class="sect5">
<h6 id="_numeric_functions">Numeric functions</h6>
<div class="paragraph">
<p>We can translate all numeric functions that are supported by Neo4j&#8217;s Cypher implementation: <a href="https://neo4j.com/docs/cypher-manual/current/functions/mathematical-numeric/">Mathematical functions - Numeric</a>:</p>
</div>
<div id="e2_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span>
    <span class="predefined">abs</span>(<span class="integer">1</span>),
    ceil(<span class="integer">1</span>),
    floor(<span class="integer">1</span>),
    round(<span class="integer">1</span>),
    round(<span class="integer">1</span>, <span class="integer">1</span>),
    sign(<span class="integer">1</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to</p>
</div>
<div id="e2_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN
    abs(1),
    ceil(1),
    floor(1),
    round(1),
    round(1, 1),
    sign(1)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_logarithmic_functions">Logarithmic functions</h6>
<div class="paragraph">
<p>Neo4j supports a broad range of <a href="https://neo4j.com/docs/cypher-manual/current/functions/mathematical-logarithmic/">logarithmic functions</a>.</p>
</div>
<div id="e3_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span>
    exp(<span class="integer">1</span>),
    ln(<span class="integer">1</span>),
    log(<span class="integer">2</span>, <span class="integer">1</span>),
    log10(<span class="integer">1</span>),
    sqrt(<span class="integer">1</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to</p>
</div>
<div id="e3_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN
    exp(1),
    log(1),
    (log(1) / log(2)),
    log10(1),
    sqrt(1)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_trigonometric_functions">Trigonometric functions</h6>
<div class="paragraph">
<p>Calls to trigonometric functions</p>
</div>
<div id="e4_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span>
    acos(<span class="integer">1</span>),
    asin(<span class="integer">1</span>),
    atan(<span class="integer">1</span>),
    atan2(<span class="integer">1</span>, <span class="integer">2</span>),
    cos(<span class="integer">1</span>),
    cot(<span class="integer">1</span>),
    degrees(<span class="integer">1</span>),
    <span class="predefined">pi</span>(),
    radians(<span class="integer">1</span>),
    sin(<span class="integer">1</span>),
    tan(<span class="integer">1</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to the corresponding <a href="https://neo4j.com/docs/cypher-manual/current/functions/mathematical-trigonometric/">Neo4j functions</a>:</p>
</div>
<div id="e4_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN
    acos(1),
    asin(1),
    atan(1),
    atan2(1, 2),
    cos(1),
    cot(1),
    degrees(1),
    pi(),
    radians(1),
    sin(1),
    tan(1)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_string_functions">String functions</h6>
<div class="paragraph">
<p>The following string manipulations are guaranteed to work:</p>
</div>
<div id="e5_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span>
    lower(<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>),
    <span class="predefined">cast</span>(<span class="integer">3</span> <span class="keyword">as</span> <span class="predefined-type">varchar</span>),
    trim(<span class="string"><span class="delimiter">'</span><span class="content"> abc </span><span class="delimiter">'</span></span>),
    length(<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>),
    <span class="keyword">left</span>(<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>, <span class="integer">2</span>),
    ltrim(<span class="string"><span class="delimiter">'</span><span class="content"> abc </span><span class="delimiter">'</span></span>),
    <span class="class">replace</span>(<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>),
    <span class="class">replace</span>(<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">b</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">x</span><span class="delimiter">'</span></span>),
    reverse(<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>),
    <span class="keyword">right</span>(<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>, <span class="integer">2</span>),
    rtrim(<span class="string"><span class="delimiter">'</span><span class="content"> abc </span><span class="delimiter">'</span></span>),
    <span class="predefined">substring</span>(<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>, <span class="integer">2</span> - <span class="integer">1</span>),
    <span class="predefined">substring</span>(<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>, <span class="integer">2</span> - <span class="integer">1</span>, <span class="integer">2</span>),
    upper(<span class="string"><span class="delimiter">'</span><span class="content">abc</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>and will be translated <a href="https://neo4j.com/docs/cypher-manual/current/functions/string/">to Neo4j&#8217;s versions</a>:</p>
</div>
<div id="e5_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN
    toLower('abc'),
    toString(3),
    trim(' abc '),
    size('abc'),
    left('abc', 2),
    ltrim(' abc '),
    replace('abc', 'b', NULL),
    replace('abc', 'b', 'x'),
    reverse('abc'),
    right('abc', 2),
    rtrim(' abc '),
    substring('abc', (2 - 1)),
    substring('abc', (2 - 1), 2),
    toUpper('abc')</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_scalar_functions">Scalar functions</h6>
<div class="paragraph">
<p>The input</p>
</div>
<div id="e6_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span>
    coalesce(<span class="integer">1</span>, <span class="integer">2</span>),
    coalesce(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>),
    nvl(<span class="integer">1</span>, <span class="integer">2</span>),
    <span class="predefined">cast</span>(<span class="string"><span class="delimiter">'</span><span class="content">1</span><span class="delimiter">'</span></span> <span class="keyword">as</span> <span class="predefined-type">boolean</span>),
    <span class="predefined">cast</span>(<span class="integer">1</span> <span class="keyword">as</span> <span class="predefined-type">float</span>),
    <span class="predefined">cast</span>(<span class="integer">1</span> <span class="keyword">as</span> <span class="predefined-type">double</span> precision),
    <span class="predefined">cast</span>(<span class="integer">1</span> <span class="keyword">as</span> real),
    <span class="predefined">cast</span>(<span class="integer">1</span> <span class="keyword">as</span> <span class="predefined-type">tinyint</span>),
    <span class="predefined">cast</span>(<span class="integer">1</span> <span class="keyword">as</span> <span class="predefined-type">smallint</span>),
    <span class="predefined">cast</span>(<span class="integer">1</span> <span class="keyword">as</span> <span class="predefined-type">int</span>),
    <span class="predefined">cast</span>(<span class="integer">1</span> <span class="keyword">as</span> <span class="predefined-type">bigint</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to (see <a href="https://neo4j.com/docs/cypher-manual/current/functions/scalar/">Scalar functions</a>):</p>
</div>
<div id="e6_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN
    coalesce(1, 2),
    coalesce(1, 2, 3),
    coalesce(1, 2),
    toBoolean('1'),
    toFloat(1),
    toFloat(1),
    toFloat(1),
    toInteger(1),
    toInteger(1),
    toInteger(1),
    toInteger(1)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_query_expressions">Query expressions</h5>
<div class="paragraph">
<p>Several advanced SQL expressions are supported as well.</p>
</div>
<div class="sect5">
<h6 id="_case_simple"><code>CASE</code> simple</h6>
<div class="paragraph">
<p>The simple <code>CASE</code> expressions</p>
</div>
<div id="e7_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span>
    <span class="keyword">CASE</span> <span class="integer">1</span> <span class="keyword">WHEN</span> <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">3</span> <span class="keyword">END</span>,
    <span class="keyword">CASE</span> <span class="integer">1</span> <span class="keyword">WHEN</span> <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">3</span> <span class="keyword">ELSE</span> <span class="integer">4</span> <span class="keyword">END</span>,
    <span class="keyword">CASE</span> <span class="integer">1</span> <span class="keyword">WHEN</span> <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">3</span> <span class="keyword">WHEN</span> <span class="integer">4</span> <span class="keyword">THEN</span> <span class="integer">5</span> <span class="keyword">END</span>,
    <span class="keyword">CASE</span> <span class="integer">1</span> <span class="keyword">WHEN</span> <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">3</span> <span class="keyword">WHEN</span> <span class="integer">4</span> <span class="keyword">THEN</span> <span class="integer">5</span> <span class="keyword">ELSE</span> <span class="integer">6</span> <span class="keyword">END</span></code></pre>
</div>
</div>
<div id="e7_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN CASE 1 WHEN 2 THEN 3 END, CASE 1 WHEN 2 THEN 3 ELSE 4 END, CASE 1 WHEN 2 THEN 3 WHEN 4 THEN 5 END, CASE 1 WHEN 2 THEN 3 WHEN 4 THEN 5 ELSE 6 END</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="https://neo4j.com/docs/cypher-manual/current/queries/case/">Cypher &#8594; Conditional expressions (CASE)</a> for more information.</p>
</div>
</div>
<div class="sect5">
<h6 id="_case_advanced"><code>CASE</code> advanced</h6>
<div class="paragraph">
<p>And <code>CASE</code> statement using a search:</p>
</div>
<div id="e7_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span>
    <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="integer">1</span> = <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">3</span> <span class="keyword">END</span>,
    <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="integer">1</span> = <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">3</span> <span class="keyword">ELSE</span> <span class="integer">4</span> <span class="keyword">END</span>,
    <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="integer">1</span> = <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">3</span> <span class="keyword">WHEN</span> <span class="integer">4</span> = <span class="integer">5</span> <span class="keyword">THEN</span> <span class="integer">6</span> <span class="keyword">END</span>,
    <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="integer">1</span> = <span class="integer">2</span> <span class="keyword">THEN</span> <span class="integer">3</span> <span class="keyword">WHEN</span> <span class="integer">4</span> = <span class="integer">5</span> <span class="keyword">THEN</span> <span class="integer">6</span> <span class="keyword">ELSE</span> <span class="integer">7</span> <span class="keyword">END</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to</p>
</div>
<div id="e7_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN
    CASE WHEN 1 = 2 THEN 3 END,
    CASE WHEN 1 = 2 THEN 3 ELSE 4 END,
    CASE WHEN 1 = 2 THEN 3 WHEN 4 = 5 THEN 6 END,
    CASE WHEN 1 = 2 THEN 3 WHEN 4 = 5 THEN 6 ELSE 7 END</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="https://neo4j.com/docs/cypher-manual/current/queries/case/">Cypher &#8594; Conditional expressions (CASE)</a> for more information.</p>
</div>
</div>
<div class="sect5">
<h6 id="_case_abbreviations_which_are_not_coalesce_or_nvl"><code>CASE</code> abbreviations (which are not <code>COALESCE</code> or <code>NVL</code>)</h6>
<div class="paragraph">
<p>The input</p>
</div>
<div id="e7_2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span>
    nullif(<span class="integer">1</span>, <span class="integer">2</span>),
    nvl2(<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to</p>
</div>
<div id="e7_2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">RETURN
    CASE WHEN 1 = 2 THEN NULL ELSE 1 END,
    CASE WHEN 1 IS NOT NULL THEN 2 ELSE 3 END</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_predicates">6.3.6. Predicates</h4>
<div class="paragraph">
<p>As with expressions a lot of logical SQL expressions and conditions used as predicates can be translated straightforward into Cypher predicates.</p>
</div>
<div class="sect4">
<h5 id="_conjunctions_and_disjunctions">Conjunctions and disjunctions</h5>
<div class="paragraph">
<p>Logical conjunctions and disjunctions are all supported.</p>
</div>
<div id="p1_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="integer">1</span> <span class="keyword">FROM</span> p <span class="keyword">WHERE</span> <span class="integer">1</span> = <span class="integer">1</span> <span class="keyword">AND</span> <span class="integer">2</span> = <span class="integer">2</span> <span class="keyword">OR</span> <span class="integer">3</span> = <span class="integer">3</span></code></pre>
</div>
</div>
<div id="p1_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:p)
WHERE ((1 = 1
    AND 2 = 2)
  OR 3 = 3)
RETURN 1</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>The input</p>
</div>
<div id="p1_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="integer">1</span> <span class="keyword">FROM</span> p <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="integer">1</span> = <span class="integer">1</span> XOR <span class="integer">2</span> = <span class="integer">2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to</p>
</div>
<div id="p1_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:p)
WHERE (NOT (1 = 1)
  XOR 2 = 2)
RETURN 1</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_operators">Operators</h5>
<div class="sect5">
<h6 id="_arithmetic_operators">Arithmetic operators</h6>
<div class="paragraph">
<p>The input</p>
</div>
<div id="p2_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="integer">1</span> <span class="keyword">FROM</span> p <span class="keyword">WHERE</span> <span class="integer">1</span> = <span class="integer">1</span> <span class="keyword">AND</span> <span class="integer">2</span> &gt; <span class="integer">1</span> <span class="keyword">AND</span> <span class="integer">1</span> &lt; <span class="integer">2</span> <span class="keyword">AND</span> <span class="integer">1</span> &lt;= <span class="integer">2</span> <span class="keyword">AND</span> <span class="integer">2</span> &gt;= <span class="integer">1</span> <span class="keyword">AND</span> <span class="integer">1</span> != <span class="integer">2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to</p>
</div>
<div id="p2_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:p)
WHERE (1 = 1
  AND 2 &gt; 1
  AND 1 &lt; 2
  AND 1 &lt;= 2
  AND 2 &gt;= 1
  AND 1 &lt;&gt; 2)
RETURN 1</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_between">Between</h6>
<div class="paragraph">
<p>Between in SQL is inclusive</p>
</div>
<div id="p2_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="integer">1</span> <span class="keyword">FROM</span> p <span class="keyword">WHERE</span> <span class="integer">2</span> <span class="keyword">BETWEEN</span> <span class="integer">1</span> <span class="keyword">AND</span> <span class="integer">3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and will be translated to (we can&#8217;t generate the shorter form (<code>1 &#8656; 2 &#8656; 3</code>) due to restrictions in the underlying generator):</p>
</div>
<div id="p2_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:p)
WHERE (1 &lt;= 2) AND (2 &lt;= 3)
RETURN 1</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>SQL has a <code>SYMMETRIC</code> keyword for the <code>BETWEEN</code> clause, to indicate that you do not care which bound of the range is larger:</p>
</div>
<div id="p2_2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="integer">1</span> <span class="keyword">FROM</span> p <span class="keyword">WHERE</span> <span class="integer">2</span> <span class="keyword">BETWEEN</span> SYMMETRIC <span class="integer">3</span> <span class="keyword">AND</span> <span class="integer">1</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We translate this into a disjunction:</p>
</div>
<div id="p2_2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:p)
WHERE (3 &lt;= 2) AND (2 &lt;= 1) OR (1 &lt;= 2) AND (2 &lt;= 3)
RETURN 1</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_logical_row_value_expressions">Logical row value expressions</h5>
<div class="paragraph">
<p>The above examples are based on scalar expressions.
Row value expressions will be translated as well:</p>
</div>
<div id="p1_2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="integer">1</span>
<span class="keyword">FROM</span> p
<span class="keyword">WHERE</span> (<span class="integer">1</span>, <span class="integer">2</span>) = (<span class="integer">3</span>, <span class="integer">4</span>)
<span class="keyword">OR</span> (<span class="integer">1</span>, <span class="integer">2</span>) &lt; (<span class="integer">3</span>, <span class="integer">4</span>)
<span class="keyword">OR</span> (<span class="integer">1</span>, <span class="integer">2</span>) &lt;= (<span class="integer">3</span>, <span class="integer">4</span>)
<span class="keyword">OR</span> (<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>) &lt;&gt; (<span class="integer">4</span>, <span class="integer">5</span>, <span class="integer">6</span>)
<span class="keyword">OR</span> (<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>) &gt; (<span class="integer">4</span>, <span class="integer">5</span>, <span class="integer">6</span>)
<span class="keyword">OR</span> (<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>) &gt;= (<span class="integer">4</span>, <span class="integer">5</span>, <span class="integer">6</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Leads to a semantically equivalent cypher:</p>
</div>
<div id="p1_2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:p)
WHERE 1 = 3 AND 2 = 4
OR (1 &lt; 3 OR 1 = 3 AND 2 &lt; 4)
OR (1 &lt; 3 OR 1 = 3 AND 2 &lt;= 4)
OR (1 != 4 AND 2 != 5 AND 3 != 6)
OR (1 &gt; 4 OR 1 = 4 AND (2 &gt; 5 OR 2 = 5 AND 3 &gt; 6))
OR (1 &gt; 4 OR 1 = 4 AND (2 &gt; 5 OR 2 = 5 AND 3 &gt;= 6))
RETURN 1</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_null_handling">Null Handling</h5>
<div class="sect5">
<h6 id="_for_scalar_expressions">For scalar expressions</h6>
<div class="paragraph">
<p>The input</p>
</div>
<div id="p3_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="integer">1</span> <span class="keyword">FROM</span> p <span class="keyword">WHERE</span> <span class="integer">1</span> <span class="keyword">IS</span> <span class="predefined-constant">NULL</span> <span class="keyword">AND</span> <span class="integer">2</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to</p>
</div>
<div id="p3_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:p)
WHERE (1 IS NULL
  AND 2 IS NOT NULL)
RETURN 1</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_for_row_value_expressions">For row value expressions</h6>
<div class="paragraph">
<p>The input</p>
</div>
<div id="p4_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> <span class="integer">1</span> <span class="keyword">FROM</span> p <span class="keyword">WHERE</span> (<span class="integer">1</span>, <span class="integer">2</span>) <span class="keyword">IS</span> <span class="predefined-constant">NULL</span> <span class="keyword">OR</span> (<span class="integer">3</span>, <span class="integer">4</span>) <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="predefined-constant">NULL</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to</p>
</div>
<div id="p4_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:p)
WHERE
  (1 IS NULL AND 2 IS NULL)
  OR (3 IS NOT NULL AND 4 IS NOT NULL)
RETURN 1</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_like_operator"><code>LIKE</code> operator</h5>
<div class="paragraph">
<p>The <code>LIKE</code> operator</p>
</div>
<div id="p5_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> * <span class="keyword">FROM</span> movies m <span class="keyword">WHERE</span> m.title <span class="keyword">LIKE</span> <span class="string"><span class="delimiter">'</span><span class="content">%Matrix%</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated into a regular expressions, replacing the <code>%</code> with <code>.*</code>:</p>
</div>
<div id="p5_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (m:`movies`) WHERE m.title =~ '.*Matrix.*'
RETURN *</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="joinin-relationships">6.3.7. Using joins to map relationships</h4>
<div class="paragraph">
<p>On the surface, joins are relationships materialized in SQL (foreign keys are not).
Sadly, it&#8217;s not as straightforward to map to Cypher.
There are several implementation options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When joining two tables on a column, take the left hand table column, use its name as relationship type, and treat it as outgoing from left to right.</p>
</li>
<li>
<p>When joining two tables with an intersection table (which it&#8217;s usually modeled in SQL for <code>m:n</code> relationships with attributes), use the name of that intersection table as relationship type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We implemented some variants thereof, however we don&#8217;t claim their absolute usefulness in all cases.</p>
</div>
<div class="sect4">
<h5 id="_1n_joins">1:n joins</h5>
<div class="sect5">
<h6 id="_natural_joins">Natural joins</h6>
<div class="paragraph">
<p>SQL <code>NATURAL</code> joins are the easiest way to denote relationship names without having to do any mapping.
A one-hope <code>NATURAL JOIN</code> will translate to an anonymous, wildcard relationship.</p>
</div>
<div id="nj1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p, m <span class="keyword">FROM</span> Person p
NATURAL <span class="keyword">JOIN</span> Movie m</code></pre>
</div>
</div>
<div id="nj1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)--&gt;(m:Movie) RETURN p, m</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p><code>NATURAL</code> joins can be chained, and the connecting join table does not need to exist.
This will be turned into a Neo4j relationship:</p>
</div>
<div id="nj2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p.name, r.role, m.* <span class="keyword">FROM</span> Person p
NATURAL <span class="keyword">JOIN</span> ACTED_IN r
NATURAL <span class="keyword">JOIN</span> Movie m</code></pre>
</div>
</div>
<div id="nj2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[r:ACTED_IN]-&gt;(m:Movie)
RETURN p.name, r.role,
       elementId(m) AS element_id, m.title AS title, m.released AS released</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_simple_join">Simple join</h6>
<div class="paragraph">
<p>Assume we configured the translator to use the following table mapping:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>people</code> mapped to label <code>People</code></p>
</li>
<li>
<p><code>movies</code> mapped to label <code>Movie</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With that in place, we translate</p>
</div>
<div id="r1_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p.name, m.title
<span class="keyword">FROM</span> people p
<span class="keyword">JOIN</span> movies m <span class="keyword">ON</span> m.id = p.directed</code></pre>
</div>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div id="r1_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[directed:DIRECTED]-&gt;(m:Movie)
RETURN p.name, m.title</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>DIRECTED</code> is the uppercase version of the join column in the left table (<code>p.directed</code>).</p>
</div>
<div class="paragraph">
<p>We can add a join column mapping in the form of <code>people.movie_id:DIRECTED</code> if we have different column names:</p>
</div>
<div id="r1_1b" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p.name, m.title
<span class="keyword">FROM</span> people p
<span class="keyword">JOIN</span> movies m <span class="keyword">ON</span> m.id = p.movie_id</code></pre>
</div>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div id="r1_1b_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[directed:DIRECTED]-&gt;(m:Movie)
RETURN p.name, m.title</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_using_the_on_clause">Using the <code>ON</code> clause</h6>
<div class="paragraph">
<p>We used backticks here for the table and column names and no mapping.</p>
</div>
<div id="r1_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p.name, m.title
<span class="keyword">FROM</span> <span class="string"><span class="delimiter">`</span><span class="content">Person</span><span class="delimiter">`</span></span> <span class="keyword">as</span> p
<span class="keyword">JOIN</span> <span class="string"><span class="delimiter">`</span><span class="content">Movie</span><span class="delimiter">`</span></span> <span class="keyword">as</span> m <span class="keyword">ON</span> (m.id = p.<span class="string"><span class="delimiter">`</span><span class="content">DIRECTED</span><span class="delimiter">`</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The translation is same as before:</p>
</div>
<div id="r1_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[directed:DIRECTED]-&gt;(m:Movie)
RETURN p.name, m.title</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_mn_joins">m:n joins</h5>
<div class="paragraph">
<p>An intersection table is a table that contains references to two other tables in the form of at least two columns.
This construct is usually required in the relational model to create an <code>m:n</code> relationship.
Such an auxiliary construct is not necessary in Neo4j.
We can model as many outgoing and incoming relationships from one label to another, and they can also have properties.
We can thus use that construct for our translator.</p>
</div>
<div class="paragraph">
<p>The following example uses a configured mapping as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>people</code> mapped to label <code>People</code></p>
</li>
<li>
<p><code>movies</code> mapped to label <code>Movie</code></p>
</li>
<li>
<p><code>movie_actors</code> mapped to <code>ACTED_IN</code></p>
</li>
</ul>
</div>
<div id="r2_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p.name, m.title
<span class="keyword">FROM</span> people p <i class="conum" data-value="1"></i><b>(1)</b>
<span class="keyword">JOIN</span> movie_actors r <span class="keyword">ON</span> r.person_id = p.id <i class="conum" data-value="2"></i><b>(2)</b>
<span class="keyword">JOIN</span> movies m <span class="keyword">ON</span> m.id = r.person_id <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The table from which to map outgoing relationships</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>An intersection table, that is used again in the next <code>JOIN</code> clause</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The final <code>JOIN</code> clause</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We do no semantic analysis: the order of the joins matter, and will lead to the following query:</p>
</div>
<div id="r2_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)-[r:ACTED_IN]-&gt;(m:Movie)
RETURN p.name, m.title</code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiple joins will result in a chain of relationships:</p>
</div>
<div id="r2_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> p.name <span class="keyword">AS</span> actor, d.name <span class="keyword">AS</span> director, m.title
<span class="keyword">FROM</span> people p
 <span class="keyword">JOIN</span> movie_actors r <span class="keyword">ON</span> r.person_id = p.id
 <span class="keyword">JOIN</span> movies m <span class="keyword">ON</span> m.id = r.person_id
 <span class="keyword">JOIN</span> movie_directors r2 <span class="keyword">ON</span> r2.movie_id = m.id
 <span class="keyword">JOIN</span> people d <span class="keyword">ON</span> r2.person_id = d.id</code></pre>
</div>
</div>
<div id="r2_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:`Person`)-[r:`ACTED_IN`]-&gt;(m:`Movie`)&lt;-[r2:`DIRECTED`]-(d:`Person`)
RETURN p.name AS actor, d.name AS director, m.title</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice how the direction of the <code>DIRECTED</code> relationship is defined by the order of the join columns.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dml_statements">6.3.8. DML statements</h4>
<div class="paragraph">
<p>This section lists the supported Data-Manipulation-Language (DML) statements.
Although a <code>SELECT</code> statement is technically DML as well, it is covered in <a href="#">Neo4j JDBC Driver</a>.</p>
</div>
<div class="sect4">
<h5 id="_deleting_nodes">Deleting nodes</h5>
<div class="paragraph">
<p>Nodes can be deleted via the SQL <code>DELETE</code> statement.</p>
</div>
<div class="paragraph">
<p>For example, to unconditionally delete all <code>person</code> nodes:</p>
</div>
<div id="d0_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">DELETE</span> <span class="keyword">FROM</span> person</code></pre>
</div>
</div>
<div id="d0_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (person:person)
DELETE person</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>WHERE</code> clause can be added to prevent this:</p>
</div>
<div id="d0_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">DELETE</span> <span class="keyword">FROM</span> person
<span class="keyword">WHERE</span> person.id = <span class="integer">1</span></code></pre>
</div>
</div>
<div id="d0_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (person:person)
WHERE person.id = 1
DELETE person</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>If you want to delete everything, but your tooling complains, just add a conditions that is always <code>true</code>:</p>
</div>
<div id="d0_1b" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">DELETE</span> <span class="keyword">FROM</span> person
<span class="keyword">WHERE</span> <span class="predefined-constant">true</span></code></pre>
</div>
</div>
<div id="d0_1b_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (person:person)
WHERE true
DELETE person</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>Of, the condition can also be that always evaluates to <code>false</code>, never deleting anything:</p>
</div>
<div id="d0_1c" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">DELETE</span> <span class="keyword">FROM</span> person
<span class="keyword">WHERE</span> <span class="predefined-constant">false</span></code></pre>
</div>
</div>
<div id="d0_1c_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (person:person)
WHERE false
DELETE person</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>Tables can be aliased, and the alias will be used in Cypher, too:</p>
</div>
<div id="d0_2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">DELETE</span> <span class="keyword">FROM</span> person p</code></pre>
</div>
</div>
<div id="d0_2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:person)
DELETE p</code></pre>
</div>
</div>
<div class="paragraph">
<p>Aliasing tables is also supported in combination with specifying the label to which the table name is mapped.
Using the same query with <code>table_mappings=person:Person</code> configured,</p>
</div>
<div id="d0_3" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">DELETE</span> <span class="keyword">FROM</span> person p</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to</p>
</div>
<div id="d0_3_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (p:Person)
DELETE p</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_deleting_nodes_and_their_related_nodes">Deleting nodes and their related nodes</h5>
<div class="paragraph">
<p>You can use SQL <code>TRUNCATE</code> to <a href="https://neo4j.com/docs/cypher-manual/current/clauses/delete/#delete-a-node-with-all-its-relationships"><code>DETACH DELETE</code> nodes</a>.</p>
</div>
<div id="d0_4" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">TRUNCATE</span> <span class="type">TABLE</span> people</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be translated to</p>
</div>
<div id="d0_4_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (people:Person)
DETACH DELETE people</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_inserting_data">Inserting data</h5>
<div class="paragraph">
<p>A single list of values with explicit columns and constant values can be inserted with a simple <code>INSERT</code> statement:</p>
</div>
<div id="d1_0" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> People (first_name, last_name, born) <span class="keyword">VALUES</span> (<span class="string"><span class="delimiter">'</span><span class="content">Helge</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Schneider</span><span class="delimiter">'</span></span>, <span class="integer">1955</span>)</code></pre>
</div>
</div>
<div id="d1_0_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">CREATE (people:`Person` {first_name: 'Helge', last_name: 'Schneider', born: 1955})</code></pre>
</div>
</div>
<div class="paragraph">
<p>All expressions, including parameters, are supported.
Parameters will be named from 1 on upwards in Cypher.</p>
</div>
<div id="d1_1" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> People (first_name, last_name, born) <span class="keyword">VALUES</span> (<span class="error">?</span>, <span class="error">?</span>, <span class="error">?</span>)</code></pre>
</div>
</div>
<div id="d1_1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">CREATE (people:`Person` {first_name: $1, last_name: $2, born: $3})</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>If you omit the column names on the insertion target, we generate names:</p>
</div>
<div id="d1_2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> People <span class="keyword">VALUES</span> (<span class="string"><span class="delimiter">'</span><span class="content">Helge</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Schneider</span><span class="delimiter">'</span></span>, <span class="integer">1955</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the <code>unknown field xxx</code> property names:</p>
</div>
<div id="d1_2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">CREATE (people:`Person` {`unknown field 0`: 'Helge', `unknown field 1`: 'Schneider', `unknown field 2`: 1955})</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>The SQL <code>VALUES</code> clause actually supports lists of values:</p>
</div>
<div id="d1_3" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> People (first_name, last_name, born) <span class="keyword">VALUES</span>
    (<span class="string"><span class="delimiter">'</span><span class="content">Helge</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Schneider</span><span class="delimiter">'</span></span>, <span class="integer">1955</span>),
    (<span class="string"><span class="delimiter">'</span><span class="content">Bela</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">B</span><span class="delimiter">'</span></span>, <span class="integer">1962</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Those values will be translated into a Cypher array to be unwound in the Cypher statement.
This is a great solution for batching inserts:</p>
</div>
<div id="d1_3_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">UNWIND [
  {first_name: 'Helge', last_name: 'Schneider', born: 1955},
  {first_name: 'Bela', last_name: 'B', born: 1962}]
AS properties
CREATE (people:`Person`)
SET people = properties</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>A returning clause is supported as well:</p>
</div>
<div id="d1_4" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> People p (name) <span class="keyword">VALUES</span> (<span class="error">?</span>) RETURNING elementId(p)</code></pre>
</div>
</div>
<div id="d1_4_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">CREATE (p:Person {name: $1}) RETURN elementId(p)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_upserts">Upserts</h5>
<div class="paragraph">
<p>We support a restricted range of "upserts" via the non-standard but pretty common <code>ON DUPLICATE</code> and <code>ON CONFLICT</code> SQL clauses.
Upserts are translated into <code>MERGE</code> statements.
While they work without constraints, you should really have uniqueness-constraints on the node properties you merge on, or Neo4j may create duplicates (see <a href="https://neo4j.com/developer/kb/understanding-how-merge-works/">Understanding how merge works</a>).</p>
</div>
<div class="paragraph">
<p>Upserts on all columns can happen via either <code>ON DUPLICATE KEY IGNORE</code> or <code>ON CONFLICT IGNORE</code>.
While <code>ON DUPLICATE KEY</code> does offer upgrade options, it assumes the primary (or unique) key being violated to be known.
Although this is most certainly the case in a relational system, this translation layer that runs without a database connection doesn&#8217;t know.</p>
</div>
<div id="upsert1" class="listingblock">
<div class="title">Listing 21. Upsert with <code>ON DUPLICATE KEY IGNORE</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> Movie(title, released) <span class="keyword">VALUES</span>(<span class="error">?</span>, <span class="error">?</span>) <span class="keyword">ON</span> DUPLICATE <span class="type">KEY</span> IGNORE</code></pre>
</div>
</div>
<div id="upsert1_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MERGE (movie:`Movie` {title: $1, released: $2})</code></pre>
</div>
</div>
<div id="upsert2" class="listingblock">
<div class="title">Listing 22. Upsert with <code>ON CONFLICT IGNORE</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> actors(name, firstname) <span class="keyword">VALUES</span>(<span class="error">?</span>, <span class="error">?</span>) <span class="keyword">ON</span> CONFLICT DO NOTHING</code></pre>
</div>
</div>
<div id="upsert2_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MERGE (actors:`Actor` {name: $1, firstname: $2})</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>If you want to define an action, you must use <code>ON CONFLICT</code> and specify the key you want to merge on.</p>
</div>
<div id="upsert3" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> tbl(i, j, k) <span class="keyword">VALUES</span> (<span class="integer">1</span>, <span class="integer">40</span>, <span class="integer">700</span>)
<span class="keyword">ON</span> CONFLICT (i) DO <span class="class">UPDATE</span> <span class="class">SET</span> j = <span class="integer">0</span>, k = <span class="integer">2</span> * EXCLUDED.k</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note how the special reference <code>EXCLUDED</code> can be used to refer to the values of columns that have not been part of the key.
They will be reused with their values in the <code>ON MATCH SET</code> clause.</p>
</div>
<div id="upsert3_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MERGE (tbl:`tbl` {i: 1})
ON CREATE SET tbl.j = 40, tbl.k = 700
ON MATCH SET tbl.j = 0, tbl.k = (2 * 700)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This works with parameters, too:</p>
</div>
<div id="upsert4" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> tbl(i, j, k) <span class="keyword">VALUES</span> (<span class="integer">1</span>, <span class="integer">2</span>, <span class="error">?</span>)
<span class="keyword">ON</span> CONFLICT (i) DO <span class="class">UPDATE</span> <span class="class">SET</span> j = EXCLUDED.k</code></pre>
</div>
</div>
<div id="upsert4_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MERGE (tbl:`tbl` {i: 1})
ON CREATE SET tbl.j = 2, tbl.k = $1
ON MATCH SET tbl.j = $1</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>It&#8217;s possible to just specify a concrete merge column instead of merging on all columns as well.
It will be translated with <code>ON CREATE</code>:</p>
</div>
<div id="upsert3b" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> tbl(i, j, k) <span class="keyword">VALUES</span> (<span class="integer">1</span>, <span class="integer">40</span>, <span class="integer">700</span>)
<span class="keyword">ON</span> CONFLICT (i) DO NOTHING</code></pre>
</div>
</div>
<div id="upsert3b_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MERGE (tbl:`tbl` {i: 1})
ON CREATE SET tbl.j = 40, tbl.k = 700</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>Using <code>ON CONFLICT</code> and specifying a key is the only way to insert multiple rows with a <code>MERGE</code> statement:</p>
</div>
<div id="upsert5" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">INSERT</span> <span class="class">INTO</span> People (first_name, last_name, born) <span class="keyword">VALUES</span>
    (<span class="string"><span class="delimiter">'</span><span class="content">Helge</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Schneider</span><span class="delimiter">'</span></span>, <span class="integer">1955</span>),
    (<span class="string"><span class="delimiter">'</span><span class="content">Bela</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">B</span><span class="delimiter">'</span></span>, <span class="integer">1962</span>)
<span class="keyword">ON</span> CONFLICT(last_name) DO <span class="class">UPDATE</span> <span class="class">SET</span> born = EXCLUDED.born</code></pre>
</div>
</div>
<div id="upsert5_expected" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">UNWIND [{first_name: 'Helge', last_name: 'Schneider', born: 1955}, {first_name: 'Bela', last_name: 'B', born: 1962}] AS properties
MERGE (people:`People` {last_name: properties['last_name']})
ON CREATE SET
  people.first_name = properties.first_name,
  people.born = properties.born
ON MATCH SET people.born = properties['born']</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="text2cypher">7. text2cypher</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an experimental translator inspired by the Neo4j Labs project <a href="https://github.com/neo4j-labs/text2cypher">text2cypher</a>.</p>
</div>
<div class="paragraph">
<p>If you add this translator to the classpath or use the <a href="#text2cypher_bundle">text2cypher bundle</a>, all queries that start with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="txt">,</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be treated as <em>natural language</em> queries written in <strong>plain english</strong>.
The driver will strip the prefix, and use <a href="https://openai.com">OpenAI</a> to translate the input into a Cypher statement.
The driver will augment the generation of the query by passing the current graph schema along with the input question.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The following data will be sent to an external API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Your database schema, including label names</p>
</li>
<li>
<p>Any natural language query</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Don&#8217;t use this translator if you don&#8217;t want the above, or are not allowed to do so.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This module requires one additional configuration: the OpenAI API key.
You can use either a URL parameter, a JDBC property entry, or an environment variable:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>URL parameter/property name is <code>openAIApiKey</code></p>
</li>
<li>
<p>Environment variable name is <code>OPEN_AI_API_KEY</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Listing 23. Example of a valid URL</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="txt">jdbc:neo4j://localhost:7687?openAIApiKey=sk-xxx-your-key</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additional configuration properties are</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">property name</th>
<th class="tableblock halign-left valign-top">default value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">openAIBaseUrl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://api.openai.com/v1" class="bare">https://api.openai.com/v1</a> (defined by langchain4j)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">openAIModelName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gpt-4-turbo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">openAITemperature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>With that in place, a query such as the following can be translated into Cypher:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="txt">, How was The Da Vinci Code rated?</code></pre>
</div>
</div>
<div class="paragraph">
<p>The outcome of the LLM is not deterministic and is likely to vary.
While you can execute it directly, we strongly recommend to use <code>Connection#nativeSQL</code> to retrieve the Cypher statement, inspect it, and then run it separately.
In our test runs, the above questions was most often correctly translated to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">MATCH (m:`Movie` {
  title: 'The Da Vinci Code'
})&lt;-[r:`REVIEWED`]-(p:`Person`)
RETURN r.rating AS Rating, p.name AS ReviewerName</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other times the result was a syntactically correct statement, but it would only return the reviewers and the movie itself.
Also note that while a human likely recognizes that you are actually thinking about the average rating, the LLM does not infer this.
Making the question more explicit gives better results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="txt">, How was The Da Vinci Code rated on average?</code></pre>
</div>
</div>
<div class="paragraph">
<p>is translated more accurately to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cypher">MATCH (m:`Movie` {
  title: 'The Da Vinci Code'
})&lt;-[:`REVIEWED`]-(p:`Person`)
RETURN avg(p.rating) AS AverageRating</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Once a natural language query gets translated into Cypher, the result will be cached and further invocations of that query will use the cached result.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All that statements that do not start with  will be used as-is and treated as Cypher.</p>
</div>
<div class="paragraph">
<p>Get the full, ready to use bundle here: <a href="https://repo.maven.apache.org/maven2/org/neo4j/neo4j-jdbc-text2cypher-bundle/6.0.1-SNAPSHOT/neo4j-jdbc-text2cypher-bundle-6.0.1-SNAPSHOT.jar" class="bare">https://repo.maven.apache.org/maven2/org/neo4j/neo4j-jdbc-text2cypher-bundle/6.0.1-SNAPSHOT/neo4j-jdbc-text2cypher-bundle-6.0.1-SNAPSHOT.jar</a>. More information in <a href="#available_bundles">Available bundles</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_neo4j_specific_conversions">Appendix A: Neo4j specific conversions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Neo4j does not support all types used in the relational world.
For some of them we offer conversions that are also available in frameworks such as <a href="https://github.com/spring-projects/spring-data-neo4j">Spring Data Neo4j (SDN)</a>.
Those conversions are available in this driver as well, so you could use both SDN and this driver interchangeably.</p>
</div>
<div class="sect2">
<h3 id="_data_types_for_fixed_point_arithmetic">A.1. Data types for fixed-point arithmetic</h3>
<div class="paragraph">
<p>Neo4j does not support <code>BigInteger</code> and <code>BigDecimal</code>.
The only way to store them is as <code>String</code>, and to read them back into the corresponding type.
This is in line with SDN and OGM.</p>
</div>
<div class="paragraph">
<p>Any parameter of those types passed to <code>PreparedStatement</code> or <code>CallableStatement</code> will be stored as <code>String</code>, but can be read back through corresponding methods on the result sets.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sql_date_time_and_timestamps">A.2. SQL Date, Time and Timestamps</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>java.sql.Date</code></dt>
<dd>
<p>Maps to Cypher <code>DATE</code></p>
</dd>
<dt class="hdlist1"><code>java.sql.Time</code></dt>
<dd>
<p>Maps to Cypher <code>LOCAL TIME</code></p>
</dd>
<dt class="hdlist1"><code>java.sql.Timestamp</code></dt>
<dd>
<p>Maps to Cypher <code>LOCAL DATETIME</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For information on Cypher date types, see <a href="https://neo4j.com/docs/cypher-manual/current/values-and-types/temporal/">Temporal types</a>.</p>
</div>
<div class="paragraph">
<p>For more precise a mapping, use a Neo4j <a href="https://neo4j.com/docs/api/java-driver/current/org.neo4j.driver/org/neo4j/driver/Value.html"><code>Value</code></a> instance with the appropriate type and its methods <code>setObject</code> and <code>getObject</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_neo4j_specific_syntax_for_statements">Appendix B: Neo4j specific syntax for statements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section deals with conventions for indexing and naming parameters in all types of statements (standard statements, prepared statements and callable statements) and other Neo4j specific syntax.</p>
</div>
<div class="sect2">
<h3 id="_callable_statements">B.1. Callable statements</h3>
<div class="sect3">
<h4 id="_general_syntax">B.1.1. General syntax</h4>
<div class="paragraph">
<p>You can invoke stored procedures as follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Common JDBC syntax</dt>
<dd>
<p><code>{? = call db.index.fulltext.queryNodes(?, ?)}</code></p>
</dd>
<dt class="hdlist1">Standard Neo4j syntax</dt>
<dd>
<p><code>call db.index.fulltext.queryNodes(?, ?) yield *</code></p>
</dd>
<dt class="hdlist1">Enumerating yielded columns</dt>
<dd>
<p><code>{$propertyName = call db.schema.nodeTypeProperties()}</code></p>
</dd>
<dt class="hdlist1">Return (only applicable for functions)</dt>
<dd>
<p><code>RETURN sin(?)</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_named_parameters">B.1.2. Named parameters</h4>
<div class="paragraph">
<p>Our callable statement implementation (<code>org.neo4j.jdbc.Neo4jCallableStatement</code>) does support named parameters. As per the JDBC specification, those are not named placeholders in a query- or statement-string, but the actual, formal parameters for the stored procedures to be called.
We support both the <code>$</code> and the colon syntax (i.e. either <code>$name</code> or <code>:name</code>).</p>
</div>
<div class="paragraph">
<p>The assigment <code>{? = call xxx()}</code> will be rewritten to <code>call xxx() yield *</code>, and <code>{$x = call xxx()}</code> will be rewritten to <code>call xxx() yield x</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_result_sets_of_callable_statements">B.1.3. Result sets of callable statements</h4>
<div class="paragraph">
<p>When you execute a callable statement via <code>executeQuery</code>, you must use the result set returned.
If you just use <code>execute</code>, we assume that the underlying procedure returns only one row and that you use the getters on the statement itself.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_migrating_from_older_versions_or_other_jdbc_drivers_for_neo4j">Appendix C: Migrating from older versions or other JDBC drivers for Neo4j</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are some other JDBC drivers for Neo4j, under various licenses and with varying features and capabilities.
In the following we outline possible migration processes.
The basic usage patterns for all JDBC drivers for Neo4j are very similar: in the end, it&#8217;s "just" about using a JDBC compliant driver, and you would use it as described in the original <a href="https://docs.oracle.com/javase/tutorial/jdbc/basics/index.html">Java tutorial about JDBC</a>.</p>
</div>
<div class="sect2">
<h3 id="_migrating_from_version_4_or_5_of_this_driver">C.1. Migrating from version 4 or 5 of this driver</h3>
<div class="paragraph">
<p>Version 5 and 4 of the Neo4j JDBC Driver have been mainly developed by <a href="http://larus-ba.it/">Larus BA, Italy</a>, a certified consulting and integration solutions partner for Neo4j.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The most important change that you need to make is removing the dependency on <code>org.neo4j:neo4j-jdbc-bolt</code>. You need to replace it with <code>org.neo4j:neo4j-jdbc</code> or one of the bundles we provide, see <a href="#available_bundles">available bundles</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_url_format_parameters_and_main_driver_class">C.1.1. URL format, parameters and main driver class</h4>
<div class="paragraph">
<p>The previous version mapped the URLs from the common Java driver onto <code>jdbc:</code>, i.e. using <code>jdbc:neo4j:neo4j+s://foobar.io:7687/</code> for connecting against a database running on host <code>foobar.io</code> on port 7687.</p>
</div>
<div class="paragraph">
<p>The following URLs (direct bolt connection) are not supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jdbc:neo4j:bolt://&lt;host&gt;:&lt;port&gt;/</code></p>
</li>
<li>
<p><code>jdbc:neo4j:bolt+s://&lt;host&gt;:&lt;port&gt;/</code></p>
</li>
<li>
<p><code>jdbc:neo4j:bolt+ssc://&lt;host&gt;:&lt;port&gt;/</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following URLs behave the same but must be rewritten:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jdbc:neo4j:neo4j://&lt;host&gt;:&lt;port&gt;/</code> becomes <code>jdbc:neo4j://&lt;host&gt;:&lt;port&gt;/</code></p>
</li>
<li>
<p><code>jdbc:neo4j:neo4j+s://&lt;host&gt;:&lt;port&gt;/</code> becomes <code>jdbc:neo4j+s://&lt;host&gt;:&lt;port&gt;/</code></p>
</li>
<li>
<p><code>jdbc:neo4j:neo4j+ssc://&lt;host&gt;:&lt;port&gt;/</code> becomes <code>jdbc:neo4j+ssc://&lt;host&gt;:&lt;port&gt;/</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following configuration properties are <strong>not</strong> supported and have no replacement:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>leaked.sessions.logging</code></p>
</li>
<li>
<p><code>readonly</code></p>
</li>
<li>
<p><code>usebookmarks</code></p>
</li>
<li>
<p><code>max.transaction.retry.time</code> (this driver has no built-in retry mechanism)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As with any persistent database connection you want to cater for failed transactions.
We made good experience with <a href="https://resilience4j.readme.io">resilience4j</a> which fits in well with common Java frameworks, such as Spring Boot.</p>
</div>
<div class="paragraph">
<p>The following properties can be achieved with standardized JDBC settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>encryption</code>&#8201;&#8212;&#8201;Use the appropriate transport scheme (<code>neo4j</code>, <code>neo4j+s</code> or <code>neo4j+ssc</code>)</p>
</li>
<li>
<p><code>autocommit</code>&#8201;&#8212;&#8201;Use <code>java.sql.Connection.setAutoCommit</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Connection pooling can be achieved with any JDBC-compliant connection pool.
The following properties have no effect:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>max.connection.lifetime</code></p>
</li>
<li>
<p><code>max.connection.poolsize</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following properties just have different names:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>connection.acquisition.timeout</code> is <code>timeout</code> (as query-parameter to the URL or inside the configuration properties)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following properties can be achieved using a different URL:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>database</code> is now part of the URL: instead of specifying <code>jdbc:neo4j:neo4j+s://foobar.io:7687?database=abc</code> you would use the database name as path segment in the url, such as: <code>jdbc:neo4j+s://foobar.io:7687/abc</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If your tooling requires to use a concrete driver class, this JDBC driver has only <code>org.neo4j.jdbc.Neo4jDriver</code>.
If you depend on a <code>javax.sql.DataSource</code>, we provide <code>org.neo4j.jdbc.Neo4jDataSource</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_flattening">C.1.2. Flattening</h4>
<div class="paragraph">
<p>While the Neo4j JDBC Driver does not support the <code>flatten</code> option, it can emulate its effect.
<code>flatten</code> un-nests returned nodes and relationships by providing all their properties as individual columns.</p>
</div>
<div class="paragraph">
<p>If you enable automatic <a href="#s2c_introduction">SQL to Cypher translation</a>, any <code>*</code>-select will inspect whether it affects nodes or relationships and will un-nest their properties, so that a <code>SELECT * FROM Movie m</code> will effectively become <code>MATCH (m:Movie) RETURN m.title AS title, m.released AS released</code>.
For more information, see <a href="#s2c_star_selects">Star-Selects</a>.</p>
</div>
<div class="paragraph">
<p>In case you want to access the actual node, return the whole table alias or just use Cypher.</p>
</div>
<div class="paragraph">
<p>The Neo4j JDBC Driver supports complex object types as return types.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-11-04 08:39:06 UTC
</div>
</div>
</body>
</html>